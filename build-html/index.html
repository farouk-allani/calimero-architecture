<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.26">
<meta name="author" content="Dar Blockchain">
<title>Calimero Digital Platform: Architecture Overview</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Calimero Digital Platform: Architecture Overview</h1>
<div class="details">
<span id="author" class="author">Dar Blockchain</span><br>
<span id="email" class="email"><a href="mailto:contact@darblockchain.io">contact@darblockchain.io</a></span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">2025-12-17</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction_and_goals">1. Introduction and Goals</a>
<ul class="sectlevel2">
<li><a href="#_executive_summary">1.1. Executive Summary</a></li>
<li><a href="#_stakeholders">1.2. Stakeholders</a></li>
<li><a href="#_requirements_overview">1.3. Requirements Overview</a></li>
<li><a href="#_quality_goals">1.4. Quality Goals</a></li>
<li><a href="#_glossary">1.5. Glossary</a></li>
</ul>
</li>
<li><a href="#_architecture">2. Architecture</a>
<ul class="sectlevel2">
<li><a href="#_technical_constraints">2.1. Technical Constraints</a></li>
<li><a href="#_organizational_constraints">2.2. Organizational Constraints</a></li>
<li><a href="#_conventions">2.3. Conventions</a></li>
<li><a href="#_system_overview">2.4. System Overview</a></li>
<li><a href="#_system_context">2.5. System Context</a></li>
<li><a href="#_container_view">2.6. Container View</a></li>
<li><a href="#_component_diagram">2.7. Component Diagram</a></li>
<li><a href="#_runtime_view">2.8. Runtime View</a></li>
<li><a href="#_deployment_view">2.9. Deployment View</a></li>
</ul>
</li>
<li><a href="#_cross_cutting_concepts">3. Cross-cutting Concepts</a>
<ul class="sectlevel2">
<li><a href="#_security_concept">3.1. Security Concept</a></li>
<li><a href="#_performance_optimization">3.2. Performance Optimization</a></li>
<li><a href="#_monitoring_and_logging">3.3. Monitoring and Logging</a></li>
<li><a href="#_data_protection_and_privacy">3.4. Data Protection and Privacy</a></li>
</ul>
</li>
<li><a href="#_architecture_decisions">4. Architecture Decisions</a>
<ul class="sectlevel2">
<li><a href="#_adr_001_llm_provider_selection_for_ai_companions">4.1. ADR 001: LLM Provider Selection for AI Companions</a></li>
<li><a href="#_adr_002_subdomain_architecture_for_audience_separation">4.2. ADR 002: Subdomain Architecture for Audience Separation</a></li>
<li><a href="#_adr_003_centralized_ai_backend_architecture">4.3. ADR 003: Centralized AI Backend Architecture</a></li>
<li><a href="#_adr_004_ephemeral_conversation_storage">4.4. ADR 004: Ephemeral Conversation Storage</a></li>
<li><a href="#_adr_005_react_native_for_mobile_app_development">4.5. ADR 005: React Native for Mobile App Development</a></li>
<li><a href="#_adr_006_voice_ai_technology_stack_selection">4.6. ADR 006: Voice AI Technology Stack Selection</a></li>
</ul>
</li>
<li><a href="#_quality_assurance_testing_strategy">5. Quality Assurance Testing Strategy</a>
<ul class="sectlevel2">
<li><a href="#_testing_scope">5.1. Testing Scope</a></li>
<li><a href="#_testing_levels">5.2. Testing Levels</a></li>
<li><a href="#_testing_strategy">5.3. Testing Strategy</a></li>
</ul>
</li>
<li><a href="#_risk_technical_debt">6. Risk &amp; Technical Debt</a>
<ul class="sectlevel2">
<li><a href="#_risks">6.1. Risks</a></li>
<li><a href="#_technical_debt">6.2. Technical Debt</a></li>
</ul>
</li>
<li><a href="#_features_traceability_matrix_rtm">7. Features Traceability Matrix (RTM)</a>
<ul class="sectlevel2">
<li><a href="#_feature_priority_matrix">7.1. Feature Priority Matrix</a></li>
<li><a href="#_traceability_summary">7.2. Traceability Summary</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction_and_goals">1. Introduction and Goals</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_executive_summary">1.1. Executive Summary</h3>
<div class="paragraph">
<p>The Calimero Digital Platform delivers a comprehensive digital ecosystem for the iconic Calimero brand, consisting of three core products targeting distinct audiences with varying requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>kids.calimero.com</strong> — A COPPA-compliant children&#8217;s website featuring safe AI-powered chat interactions, games, videos, and educational content</p>
</li>
<li>
<p><strong>calimero.com</strong> — The main adult platform with e-commerce capabilities, culture content, AI character generation, and nostalgic features</p>
</li>
<li>
<p><strong>Calimero Kids Mobile App</strong> — A React Native application (iOS &amp; Android) with voice-enabled AI companions featuring Rive animations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The platform is built on a modern tech stack with a centralized NestJS backend that orchestrates all AI interactions through multi-layer safety filtering, content moderation, and session management. The architecture prioritizes child safety, COPPA compliance, and scalable performance while delivering an engaging user experience across all touchpoints.</p>
</div>
<div class="sect3">
<h4 id="_key_business_objectives">1.1.1. Key Business Objectives</h4>
<div class="ulist">
<ul>
<li>
<p>Establish Calimero as a leading digital brand for children&#8217;s entertainment and merchandise</p>
</li>
<li>
<p>Provide safe, engaging AI-powered interactions for children ages 4-12</p>
</li>
<li>
<p>Enable e-commerce and cultural content delivery for adult audiences</p>
</li>
<li>
<p>Achieve MVP launch within 8-week timeline</p>
</li>
<li>
<p>Support multi-language audiences (Italian, French, English)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_target_timeline">1.1.2. Target Timeline</h4>
<div class="ulist">
<ul>
<li>
<p><strong>8 Weeks (2 Months)</strong> — MVP Launch Ready</p>
</li>
<li>
<p><strong>Version 1.0</strong> — December 2025</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stakeholders">1.2. Stakeholders</h3>
<table id="stakeholders" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">Contact</th>
<th class="tableblock halign-left valign-top">Expectations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brand Owner / Executive Sponsor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calimero IP Holder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brand integrity, safe content for children, commercial success</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chief Technology Officer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dar Blockchain CTO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Technical excellence, scalable architecture, security compliance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Product Owner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Product Lead</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature completeness, user satisfaction, COPPA compliance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dar Blockchain PM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">On-time delivery within 8-week timeline, budget adherence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tech Lead</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Development Lead</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code quality, technical implementation, team coordination</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solutions Architect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Architecture Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System design, architectural decisions, integration patterns</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UX/UI Designer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Design Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User experience quality, child-friendly interface, brand consistency</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legal/Compliance Officer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legal Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA compliance, GDPR adherence, privacy protection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QA Lead</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testing Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quality assurance, testing coverage, bug-free releases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DevOps Engineer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Infrastructure Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment automation, monitoring, scalability</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_stakeholder_concerns_matrix">1.2.1. Stakeholder Concerns Matrix</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Stakeholder Group</th>
<th class="tableblock halign-left valign-top">Primary Concerns</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Stakeholders</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ROI, brand protection, market differentiation, timeline adherence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Technical Stakeholders</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Architecture scalability, code maintainability, security, performance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance Stakeholders</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA compliance, data privacy, content moderation, legal liability</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">End Users (Children)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fun experience, safe interactions, engaging content, voice AI companions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">End Users (Adults/Parents)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust, safety controls, e-commerce functionality, parental dashboard</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_overview">1.3. Requirements Overview</h3>
<div class="sect3">
<h4 id="_functional_requirements">1.3.1. Functional Requirements</h4>
<table id="functional-requirements" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 88.8889%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Requirement</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE1"></a>R1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system shall provide a COPPA-compliant kids website (kids.calimero.com) with zero data collection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE2"></a>R2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system shall provide an adult website (calimero.com) with e-commerce capabilities and user authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE3"></a>R3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system shall deliver a kids-only mobile app with voice AI companions for iOS and Android</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE4"></a>R4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All AI interactions shall be routed through a centralized NestJS backend with safety filtering</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE5"></a>R5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system shall support multi-language content (Italian, French, English)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE6"></a>R6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The kids platform shall feature 5 AI character companions (Calimero, Priscilla, Valeriano, Pierrot, Rosita)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE7"></a>R7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system shall provide parental controls with PIN verification, time limits, and feature toggles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE8"></a>R8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI conversations shall be ephemeral with no persistent storage (in-memory sessions only)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE9"></a>R9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The mobile app shall feature Rive animations with lip-sync driven by audio amplitude</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="RE10"></a>R10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The adult site shall include AI character generator and meme maker functionality</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_technical_requirements">1.3.2. Technical Requirements</h4>
<table id="technical-requirements" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 88.8889%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Requirement</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR1"></a>TR1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frontend web applications shall be built using Next.js 14 (App Router) with TypeScript</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR2"></a>TR2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile application shall be built using React Native with TypeScript</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR3"></a>TR3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backend services shall be implemented using NestJS (TypeScript)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR4"></a>TR4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Speech-to-Text shall be implemented using Whisper API or native device capabilities</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR5"></a>TR5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text-to-Speech shall be implemented using ElevenLabs with custom trained voices</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR6"></a>TR6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM integration shall use external API (Claude/Together AI) with provider abstraction layer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR7"></a>TR7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web hosting shall use Vercel for automatic subdomain routing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR8"></a>TR8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backend shall be deployed on dedicated server infrastructure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR9"></a>TR9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content management shall use headless CMS (Sanity or Contentful)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TR10"></a>TR10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kids site analytics shall use cookieless solution (Plausible) for COPPA compliance</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_integration_requirements">1.3.3. Integration Requirements</h4>
<table id="integration-requirements" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 88.8889%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Requirement</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="IR1"></a>IR1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E-commerce integration with Shopify Storefront API or Medusa.js</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="IR2"></a>IR2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication integration with NextAuth.js for social logins (adult site only)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="IR3"></a>IR3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Analytics integration with Google Analytics 4 and Meta Pixel (adult site only)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="IR4"></a>IR4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Video streaming integration with Mux including parental controls</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="IR5"></a>IR5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CDN integration with Cloudflare for edge caching and DDoS protection</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_quality_goals">1.4. Quality Goals</h3>
<div class="sect3">
<h4 id="_primary_quality_attributes">1.4.1. Primary Quality Attributes</h4>
<table id="quality-goals" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Quality</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q1"></a>Q1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child Safety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-layer AI content moderation ensuring safe interactions. Input/output filtering, topic boundaries, emergency detection protocols. Zero tolerance for inappropriate content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q2"></a>Q2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA Compliance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full compliance with Children&#8217;s Online Privacy Protection Act. No personal data collection on kids platforms. No cookies, no chat persistence, no tracking pixels.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q3"></a>Q3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System responds within 1 second for 95% of requests. Voice AI interactions achieve low latency with streaming responses. Core Web Vitals optimized (LCP, FID, CLS).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q4"></a>Q4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS 1.3 encryption for all communications. Strict CORS policies. Input sanitization before LLM processing. Output validation before delivery. Regular security audits.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q5"></a>Q5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Architecture supports 10x growth in user base. Horizontal scaling for backend services. CDN edge caching for global distribution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q6"></a>Q6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Localization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-language support for Italian, French, and English at launch. URL-based locale routing. CMS-driven content localization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q7"></a>Q7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accessibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WCAG 2.1 AA compliance. Large touch targets (48px+) for kids interfaces. Icon-heavy navigation with minimal text for young users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q8"></a>Q8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reliability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.9% uptime target. Graceful degradation with text fallback for voice features. LLM provider abstraction for failover capability.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q9"></a>Q9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modular architecture with clear separation of concerns. Comprehensive documentation. CI/CD pipeline with automated testing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Q10"></a>Q10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Privacy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No PII storage on kids platforms. Ephemeral AI conversations. Parent-controlled activity summaries without chat content.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_quality_scenarios">1.4.2. Quality Scenarios</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quality Attribute</th>
<th class="tableblock halign-left valign-top">Scenario</th>
<th class="tableblock halign-left valign-top">Priority</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child Safety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a child mentions potential harm or danger, the system immediately responds with appropriate guidance to seek adult help and logs the event (without PII) for review.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Under peak load of 1000 concurrent users, voice AI response latency remains under 2 seconds including STT, LLM processing, and TTS.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA Compliance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kids platform operates without setting any cookies, collecting any personal information, or storing any conversation history.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reliability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When the primary LLM provider experiences downtime, the system automatically switches to backup provider with zero user-facing errors.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_glossary">1.5. Glossary</h3>
<table id="glossary" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 88.8889%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="AI"></a>AI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Artificial Intelligence - Technology enabling machines to simulate human intelligence, used in the platform for chat companions and content generation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="COPPA"></a>COPPA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Children&#8217;s Online Privacy Protection Act - U.S. federal law that imposes requirements on operators of websites or online services directed to children under 13.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="CMS"></a>CMS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Management System - Software used to manage digital content. Calimero uses headless CMS (Sanity/Contentful) for content delivery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="CDN"></a>CDN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Delivery Network - A geographically distributed network of servers that delivers cached content from locations closer to users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="CORS"></a>CORS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cross-Origin Resource Sharing - Security mechanism that allows or restricts requests for resources from another domain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="ISR"></a>ISR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incremental Static Regeneration - Next.js feature that allows static pages to be updated after build time without rebuilding the entire site.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="JWT"></a>JWT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Web Token - Compact, URL-safe token format used for secure information transfer between parties.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="LLM"></a>LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Large Language Model - AI models trained on vast text data, used to power the AI chat companions (e.g., Claude, GPT).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="MVP"></a>MVP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum Viable Product - The initial version with just enough features to satisfy early customers and provide feedback for future development.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="NestJS"></a>NestJS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A progressive Node.js framework for building efficient, scalable server-side applications using TypeScript.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="PII"></a>PII</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Personally Identifiable Information - Any data that could potentially identify a specific individual. Not collected on kids platforms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="Rive"></a>Rive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A real-time interactive design and animation tool used for character animations with state machines and lip-sync capabilities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="SSG"></a>SSG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Static Site Generation - Pre-rendering pages at build time for improved performance and SEO.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="STT"></a>STT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Speech-to-Text - Technology that converts spoken language into written text. Implemented using Whisper API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TLS"></a>TLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transport Layer Security - Cryptographic protocol designed to provide communications security over a network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TTS"></a>TTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text-to-Speech - Technology that converts written text into spoken audio. Implemented using ElevenLabs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TTL"></a>TTL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time To Live - The duration for which data remains valid in cache or memory before expiration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="WCAG"></a>WCAG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web Content Accessibility Guidelines - International standards for making web content more accessible.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">2. Architecture</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>List key constraints that influence architectural decisions. Keep this list updated as project constraints evolve.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_technical_constraints">2.1. Technical Constraints</h3>
<div class="ulist">
<ul>
<li>
<p>Must deliver separate web experiences for kids (COPPA-compliant) and adults (e-commerce enabled)</p>
</li>
<li>
<p>All AI interactions must route through centralized NestJS backend</p>
</li>
<li>
<p>No persistent storage of conversation data (ephemeral sessions only)</p>
</li>
<li>
<p>Mobile app must support iOS 15+ and Android 10+</p>
</li>
<li>
<p>Voice AI must integrate with external STT (Whisper) and TTS (ElevenLabs) services</p>
</li>
<li>
<p>Frontend must use Next.js 14 with TypeScript for SEO optimization</p>
</li>
<li>
<p>Kids platform must operate with zero cookies and no tracking pixels</p>
</li>
<li>
<p>Multi-language support required from launch (IT, FR, EN)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_organizational_constraints">2.2. Organizational Constraints</h3>
<div class="ulist">
<ul>
<li>
<p>Development timeline fixed at 8 weeks for MVP launch</p>
</li>
<li>
<p>UX/UI designs must be finalized and approved before Sprint 0</p>
</li>
<li>
<p>Legal COPPA audit required before kids platform launch</p>
</li>
<li>
<p>App Store/Play Store approval process must be factored into timeline</p>
</li>
<li>
<p>Development team operates under Dar Blockchain management</p>
</li>
<li>
<p>Brand guidelines from Calimero IP holder must be followed strictly</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_conventions">2.3. Conventions</h3>
<div class="ulist">
<ul>
<li>
<p>TypeScript as primary language across all applications</p>
</li>
<li>
<p>Microservices architecture with clear domain boundaries</p>
</li>
<li>
<p>RESTful API design with JSON payloads</p>
</li>
<li>
<p>Component-based frontend architecture</p>
</li>
<li>
<p>Tailwind CSS for styling consistency</p>
</li>
<li>
<p>Comprehensive unit and integration testing (Jest, React Testing Library)</p>
</li>
<li>
<p>Git-based version control with pull request workflow</p>
</li>
<li>
<p>Semantic versioning for releases</p>
</li>
<li>
<p>AsciiDoc for technical documentation</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_system_overview">2.4. System Overview</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Layer</th>
<th class="tableblock halign-left valign-top">Components</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Next.js Kids Web App, Next.js Adult Web App, React Native Mobile App</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backend</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NestJS API Server (TypeScript)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">External APIs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM API (Together AI/Claude), Speech-to-Text API (Whisper), Text-to-Speech API (ElevenLabs)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Infrastructure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vercel (Web hosting), Dedicated Server (Backend), Cloudflare CDN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data Storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Headless CMS (Sanity/Contentful), In-memory session cache (Redis)</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This section presents the static structure of the system using C4 model diagrams. Each level provides increasing detail about the software architecture. Update these diagrams when adding, removing, or significantly changing system components.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_system_context">2.5. System Context</h3>
<div class="sect3">
<h4 id="_overview">2.5.1. Overview</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This diagram shows the systems that are communicating and interacting within the scope of the Calimero Digital Platform.
The platform serves two distinct audiences (children and adults) through separate web properties and a dedicated mobile application.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_context_diagram">2.5.2. Context Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-dd6f62b5253e6cb179af3c0958e18723.png" alt="Diagram" width="1591" height="1003">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_key_elements">2.5.3. Key Elements</h4>
<div class="sect4">
<h5 id="_child_user">Child User</h5>
<div class="paragraph">
<p>Children ages 4-12 are the primary users of the kids website and mobile app. They interact with AI character companions, play educational games, watch Calimero episodes, and engage in creative activities. All interactions are designed to be safe, moderated, and COPPA-compliant. Voice interactions are only available in the mobile app.</p>
</div>
<div class="paragraph">
<p>Key features accessed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AI text chat (website) and voice chat (mobile app)</p>
</li>
<li>
<p>Games: memory match, puzzles, coloring, dress-up, quiz</p>
</li>
<li>
<p>Video content: episodes, clips, AI-generated shorts</p>
</li>
<li>
<p>Character profiles with animations and fun facts</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_parentguardian">Parent/Guardian</h5>
<div class="paragraph">
<p>Parents access the parental dashboard on both the website and mobile app to manage their child&#8217;s experience. They set time limits, enable/disable features, and can view activity summaries (without chat content). All parental controls are PIN-protected.</p>
</div>
<div class="paragraph">
<p>Key features accessed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Parental dashboard (PIN-protected)</p>
</li>
<li>
<p>Time limit configuration</p>
</li>
<li>
<p>Feature toggles (voice chat, downloads, specific characters)</p>
</li>
<li>
<p>Weekly activity summaries via email</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_adult_user">Adult User</h5>
<div class="paragraph">
<p>Adults ages 18-50 access calimero.com for merchandise shopping, nostalgic content, and AI-powered creative tools. They can create accounts, make purchases, and engage with the Calimero culture and community.</p>
</div>
<div class="paragraph">
<p>Key features accessed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>E-commerce: merchandise, drops, wishlist</p>
</li>
<li>
<p>AI character generator and meme maker</p>
</li>
<li>
<p>Nostalgia content: classic episodes, history</p>
</li>
<li>
<p>Account management, order history</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_kids_website_kids_calimero_com">Kids Website (kids.calimero.com)</h5>
<div class="paragraph">
<p>A completely separate, child-safe web experience with zero tracking or data collection. Features bright, playful design with large touch targets and icon-heavy navigation.</p>
</div>
<div class="paragraph">
<p>Technical characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Next.js 14 with Static Site Generation</p>
</li>
<li>
<p>Cookieless analytics (Plausible)</p>
</li>
<li>
<p>No user accounts or persistent data</p>
</li>
<li>
<p>COPPA-compliant design and implementation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Link to <a href="03_component_view.html#components">component view</a> for detailed internal structure.</p>
</div>
</div>
<div class="sect4">
<h5 id="_adult_website_calimero_com">Adult Website (calimero.com)</h5>
<div class="paragraph">
<p>The main commercial platform with full e-commerce capabilities, user accounts, and analytics. Features sleek, minimal streetwear aesthetic.</p>
</div>
<div class="paragraph">
<p>Technical characteristics:
* Next.js 14 with ISR for dynamic content
* NextAuth.js for authentication
* Full analytics integration (GA4, Meta Pixel)
* E-commerce integration (Shopify/Medusa)</p>
</div>
</div>
<div class="sect4">
<h5 id="_kids_mobile_app">Kids Mobile App</h5>
<div class="paragraph">
<p>A dedicated React Native application for iOS and Android featuring voice AI companions with Rive animations. This is the premium kids experience with advanced voice interaction capabilities.</p>
</div>
<div class="paragraph">
<p>Technical characteristics:
* React Native with TypeScript
* Rive for real-time character animations
* Native audio APIs for voice recording/playback
* Secure local storage (settings only)</p>
</div>
</div>
<div class="sect4">
<h5 id="_calimero_backend_nestjs">Calimero Backend (NestJS)</h5>
<div class="paragraph">
<p>The centralized backend server handling all AI orchestration, safety filtering, content delivery, and business logic. All AI traffic is routed through this layer for consistent moderation and control.</p>
</div>
<div class="paragraph">
<p>Link to relevant <a href="../05_deployment_view.html#_deployment_view">deployment</a> documentation.</p>
</div>
</div>
<div class="sect4">
<h5 id="_external_systems">External Systems</h5>
<div class="sect5">
<h6 id="_llm_api_together_ai_claude">LLM API (Together AI / Claude)</h6>
<div class="paragraph">
<p>External large language model service providing AI inference for character conversations. Selected for child-safety capabilities and provider abstraction for failover.</p>
</div>
<div class="paragraph">
<p>Reference: <a href="#../04_architecture_decisions/adr-001-llm-provider.adoc">ADR-001: LLM Provider Selection</a></p>
</div>
</div>
<div class="sect5">
<h6 id="_elevenlabs_tts">ElevenLabs TTS</h6>
<div class="paragraph">
<p>Text-to-speech service with custom voice training for each of the 5 AI characters. Provides natural, expressive voice synthesis with character-specific personalities.</p>
</div>
</div>
<div class="sect5">
<h6 id="_whisper_stt">Whisper STT</h6>
<div class="paragraph">
<p>Speech-to-text service for converting children&#8217;s voice input to text for LLM processing. Supports multiple languages and provides accurate transcription for young speakers.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_container_view">2.6. Container View</h3>
<div class="sect3">
<h4 id="_overview_2">2.6.1. Overview</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This diagram shows the container images and their interactions within the Calimero Digital Platform.
Containers represent deployable units that execute code or store data.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_container_diagram">2.6.2. Container Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-1ef9d163c9b207d22a3ec417629cff01.png" alt="Diagram" width="1156" height="1372">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_description_of_containers">2.6.3. Description of Containers</h4>
<div class="sect4">
<h5 id="_kids_web_application">Kids Web Application</h5>
<div class="paragraph">
<p>The kids web application (kids.calimero.com) is a completely separate Next.js 14 application optimized for children ages 4-12. It features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Framework</strong>: Next.js 14 with App Router</p>
</li>
<li>
<p><strong>Styling</strong>: Tailwind CSS with child-friendly design system (bright colors, large fonts, bouncy animations)</p>
</li>
<li>
<p><strong>Analytics</strong>: Cookieless analytics only (Plausible) for COPPA compliance</p>
</li>
<li>
<p><strong>Features</strong>: Games, videos, AI text chat, character profiles</p>
</li>
<li>
<p><strong>Data Policy</strong>: Zero cookies, zero tracking, no user accounts</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Design decisions:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Static Site Generation (SSG) for all public pages</p>
</li>
<li>
<p>Incremental Static Regeneration (ISR) for content updates</p>
</li>
<li>
<p>Large touch targets (48px+) for young users</p>
</li>
<li>
<p>Icon-heavy navigation with minimal text</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_adult_web_application">Adult Web Application</h5>
<div class="paragraph">
<p>The adult web application (calimero.com) serves nostalgia seekers, collectors, and culture enthusiasts with full e-commerce capabilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Framework</strong>: Next.js 14 with App Router</p>
</li>
<li>
<p><strong>Authentication</strong>: NextAuth.js with social logins</p>
</li>
<li>
<p><strong>E-commerce</strong>: Shopify Storefront API integration</p>
</li>
<li>
<p><strong>Analytics</strong>: Full GA4 and Meta Pixel integration</p>
</li>
<li>
<p><strong>Features</strong>: Shop, drops, culture, AI generator, accounts</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Design decisions:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sleek, minimal streetwear aesthetic (black, white, yellow accents)</p>
</li>
<li>
<p>Quick checkout (Apple Pay, Google Pay, PayPal)</p>
</li>
<li>
<p>Multi-currency support (EUR, USD, GBP, JPY)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_kids_mobile_app_2">Kids Mobile App</h5>
<div class="paragraph">
<p>The premium kids experience with voice AI companions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Framework</strong>: React Native with TypeScript</p>
</li>
<li>
<p><strong>Animation</strong>: Rive for real-time character lip-sync</p>
</li>
<li>
<p><strong>Platforms</strong>: iOS 15+ and Android 10+</p>
</li>
<li>
<p><strong>Storage</strong>: Secure local storage (settings only, no chat history)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Features:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Voice conversations with 5 AI characters</p>
</li>
<li>
<p>Interactive bedtime stories</p>
</li>
<li>
<p>Games with voice feedback</p>
</li>
<li>
<p>Offline episode downloads (parent permission required)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_api_gateway">API Gateway</h5>
<div class="paragraph">
<p>The entry point for all client requests, implemented as a NestJS module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request validation and sanitization</p>
</li>
<li>
<p>Rate limiting per client type</p>
</li>
<li>
<p>Authentication routing (adult site only)</p>
</li>
<li>
<p>CORS enforcement with whitelisted origins</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ai_orchestrator">AI Orchestrator</h5>
<div class="paragraph">
<p>The core module managing AI character interactions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Character persona injection based on selected companion</p>
</li>
<li>
<p>Session memory management with TTL-based expiration</p>
</li>
<li>
<p>LLM provider abstraction for failover capability</p>
</li>
<li>
<p>Response streaming for low-latency delivery</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_safety_moderation_module">Safety &amp; Moderation Module</h5>
<div class="paragraph">
<p>Critical module ensuring child-safe AI interactions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Input Filtering</strong>: Sanitizes user input before LLM processing</p>
</li>
<li>
<p><strong>Output Filtering</strong>: Validates AI responses before delivery</p>
</li>
<li>
<p><strong>Topic Boundaries</strong>: Restricts conversations to safe topics</p>
</li>
<li>
<p><strong>Emergency Detection</strong>: Identifies potential harm/danger mentions and triggers appropriate responses</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_voice_pipeline">Voice Pipeline</h5>
<div class="paragraph">
<p>Handles speech-to-text and text-to-speech operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>STT adapter for Whisper API integration</p>
</li>
<li>
<p>TTS adapter for ElevenLabs with character-specific voices</p>
</li>
<li>
<p>Audio stream normalization</p>
</li>
<li>
<p>Latency optimization with streaming</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_parental_controls_module">Parental Controls Module</h5>
<div class="paragraph">
<p>Manages parental settings and restrictions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PIN verification for dashboard access</p>
</li>
<li>
<p>Daily time limit enforcement</p>
</li>
<li>
<p>Feature toggle management</p>
</li>
<li>
<p>Activity summary generation (no PII, no chat content)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_content_delivery_service">Content Delivery Service</h5>
<div class="paragraph">
<p>Handles CMS integration and content caching:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Locale resolution (IT, FR, EN)</p>
</li>
<li>
<p>Content caching for performance</p>
</li>
<li>
<p>Proxy to headless CMS APIs</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_session_cache_redis">Session Cache (Redis)</h5>
<div class="paragraph">
<p>In-memory session storage:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ephemeral conversation context</p>
</li>
<li>
<p>TTL-based automatic expiration</p>
</li>
<li>
<p>No persistent storage of chat data</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_component_diagram">2.7. Component Diagram</h3>
<div class="sect3">
<h4 id="_overview_3">2.7.1. Overview</h4>
<div class="paragraph">
<p>This document provides a component-level view (C3) of the Calimero Platform, detailing the internal structure of the main containers and their interactions with external systems.</p>
</div>
</div>
<div class="sect3">
<h4 id="_component_diagram_frontend_applications">2.7.2. <a id="components"></a> Component Diagram - Frontend Applications</h4>
<div class="paragraph">
<p>The Calimero platform consists of two web applications and one mobile application, each serving distinct user segments with appropriate features and compliance requirements.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-920abb7824d610d8107467ef94619bad.png" alt="Diagram" width="1783" height="1222">
</div>
</div>
<div class="sect4">
<h5 id="_kids_website_components">Kids Website Components</h5>
<div class="sect5">
<h6 id="_home_page">Home Page</h6>
<div class="paragraph">
<p>The animated landing page featuring the day&#8217;s highlighted content. Uses Static Site Generation for optimal performance and SEO. Includes featured episode preview, game of the day highlight, and quick navigation to main sections.</p>
</div>
</div>
<div class="sect5">
<h6 id="_watch_section">Watch Section</h6>
<div class="paragraph">
<p>Video content delivery with ISR for regular content updates. Features full episodes, short clips, AI-generated daily shorts, and mood-based recommendations. Integrates with Mux for video streaming with parental controls.</p>
</div>
</div>
<div class="sect5">
<h6 id="_play_section">Play Section</h6>
<div class="paragraph">
<p>Interactive games section using Client-Side Rendering for dynamic gameplay. Includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Coloring activities with character templates</p>
</li>
<li>
<p>Memory match games</p>
</li>
<li>
<p>Puzzles with varying difficulty</p>
</li>
<li>
<p>Dress-up games with Calimero characters</p>
</li>
<li>
<p>Quiz games with educational content</p>
</li>
<li>
<p>Story builder for creative expression</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_friends_section">Friends Section</h6>
<div class="paragraph">
<p>Character profiles showcasing the 5 AI companions with Rive animations and voice clips. Provides fun facts and personality traits for each character.</p>
</div>
</div>
<div class="sect5">
<h6 id="_talk_section">Talk Section</h6>
<div class="paragraph">
<p>AI companion text chat interface with real-time moderation. Conversations are ephemeral (session-based) with no persistent storage. Time-limited sessions with friendly warnings.</p>
</div>
</div>
<div class="sect5">
<h6 id="_parents_dashboard">Parents Dashboard</h6>
<div class="paragraph">
<p>PIN-protected dashboard for parental controls:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Daily time limit configuration</p>
</li>
<li>
<p>Feature toggles (chat, downloads, specific characters)</p>
</li>
<li>
<p>Activity summary view (no chat content visible)</p>
</li>
<li>
<p>Sync with mobile app settings</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_adult_website_components">Adult Website Components</h5>
<div class="sect5">
<h6 id="_home_page_2">Home Page</h6>
<div class="paragraph">
<p>Hero-driven landing with ISR for dynamic content. Features latest drops, featured products, and culture highlights. Implements streetwear aesthetic design.</p>
</div>
</div>
<div class="sect5">
<h6 id="_shop_section">Shop Section</h6>
<div class="paragraph">
<p>Full e-commerce experience integrated with Shopify Storefront API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Product catalog with filters (category, size, price)</p>
</li>
<li>
<p>Size guides and fit recommendations</p>
</li>
<li>
<p>Wishlist with restock alerts</p>
</li>
<li>
<p>Quick checkout (Apple Pay, Google Pay, PayPal)</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_drops_section">Drops Section</h6>
<div class="paragraph">
<p>Limited release management with countdown timers and notification signup. ISR updates for real-time inventory status.</p>
</div>
</div>
<div class="sect5">
<h6 id="_culture_section">Culture Section</h6>
<div class="paragraph">
<p>Community-driven content including memes, social feed integration, and user-generated content highlights.</p>
</div>
</div>
<div class="sect5">
<h6 id="_nostalgia_section">Nostalgia Section</h6>
<div class="paragraph">
<p>Historical content archive with classic episodes, show history, and "remember when" features. Static generation for performance.</p>
</div>
</div>
<div class="sect5">
<h6 id="_create_section">Create Section</h6>
<div class="paragraph">
<p>AI-powered creative tools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Character generator using LLM + image generation</p>
</li>
<li>
<p>Meme maker with Calimero templates</p>
</li>
<li>
<p>Fan art gallery</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_account_section">Account Section</h6>
<div class="paragraph">
<p>User account management with NextAuth.js:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Login/registration with social providers</p>
</li>
<li>
<p>Order history and tracking</p>
</li>
<li>
<p>Wishlist management</p>
</li>
<li>
<p>Drop notification preferences</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_mobile_app_components">Mobile App Components</h5>
<div class="sect5">
<h6 id="_talk_feature_voice_ai">Talk Feature (Voice AI)</h6>
<div class="paragraph">
<p>The core feature enabling voice conversations with AI characters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tap-to-talk or always-listening mode (parent choice)</p>
</li>
<li>
<p>Real-time character reactions while listening</p>
</li>
<li>
<p>Lip-sync animation driven by audio amplitude</p>
</li>
<li>
<p>Session time limits with friendly warnings</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_stories_feature">Stories Feature</h6>
<div class="paragraph">
<p>Interactive bedtime story experience:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AI-generated personalized stories</p>
</li>
<li>
<p>Choice-based narrative ("Should Calimero go left or right?")</p>
</li>
<li>
<p>Priscilla narration with soothing voice</p>
</li>
<li>
<p>Sleep timer with gentle fade-out</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_play_feature">Play Feature</h6>
<div class="paragraph">
<p>Mobile-optimized games with voice feedback:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Memory match, puzzles, coloring</p>
</li>
<li>
<p>Rosita-hosted quiz games</p>
</li>
<li>
<p>Valeriano-led adventure games</p>
</li>
<li>
<p>Progress badges (local storage only)</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_watch_feature">Watch Feature</h6>
<div class="paragraph">
<p>Video content with offline capabilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Full episodes and clips</p>
</li>
<li>
<p>Offline download (parent permission required)</p>
</li>
<li>
<p>AI-generated daily shorts</p>
</li>
<li>
<p>"Watch with me" mode with character commentary</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_learn_feature">Learn Feature</h6>
<div class="paragraph">
<p>Educational content with Rosita:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Homework question assistance</p>
</li>
<li>
<p>Fun facts (animals, science, nature)</p>
</li>
<li>
<p>Language learning basics (IT, FR, EN)</p>
</li>
<li>
<p>Math games with voice guidance</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_parental_controls_mobile">Parental Controls (Mobile)</h6>
<div class="paragraph">
<p>PIN-protected mobile dashboard syncing with web:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Daily time limits (30min / 1hr / 2hr / Unlimited)</p>
</li>
<li>
<p>Voice chat toggle</p>
</li>
<li>
<p>Download permissions</p>
</li>
<li>
<p>Bedtime mode (quiet hours, Priscilla-only)</p>
</li>
<li>
<p>Character restrictions</p>
</li>
<li>
<p>Weekly activity summary emails</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_component_diagram_backend">2.7.3. Component Diagram - Backend</h4>
<div class="paragraph">
<p>The Calimero Backend is a NestJS monolith with clearly separated modules following domain-driven design principles.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-646f2e340184f49242764185410712e3.png" alt="Diagram" width="3983" height="1067">
</div>
</div>
<div class="sect4">
<h5 id="_api_gateway_2">API Gateway</h5>
<div class="paragraph">
<p>Entry point for all client requests. Handles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request routing to appropriate services</p>
</li>
<li>
<p>Input validation using class-validator</p>
</li>
<li>
<p>Rate limiting (different limits for kids vs adult platforms)</p>
</li>
<li>
<p>Request/response logging (no PII)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_auth_guard">Auth Guard</h5>
<div class="paragraph">
<p>Authentication guard for adult site endpoints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JWT token validation</p>
</li>
<li>
<p>Session verification</p>
</li>
<li>
<p>Role-based access control</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ai_orchestrator_2">AI Orchestrator</h5>
<div class="paragraph">
<p>Central coordination service for AI interactions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Injects character-specific system prompts</p>
</li>
<li>
<p>Manages conversation context within session TTL</p>
</li>
<li>
<p>Coordinates safety filtering pipeline</p>
</li>
<li>
<p>Handles LLM response streaming</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_llm_adapter">LLM Adapter</h5>
<div class="paragraph">
<p>Provider abstraction layer enabling:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hot-swappable LLM providers</p>
</li>
<li>
<p>Automatic failover to backup provider</p>
</li>
<li>
<p>Request/response normalization</p>
</li>
<li>
<p>Cost tracking per request</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_input_safety_filter">Input Safety Filter</h5>
<div class="paragraph">
<p>Pre-processing interceptor for user input:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sanitization of potentially harmful content</p>
</li>
<li>
<p>PII detection and removal</p>
</li>
<li>
<p>Length and format validation</p>
</li>
<li>
<p>Profanity filtering</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_output_safety_filter">Output Safety Filter</h5>
<div class="paragraph">
<p>Post-processing interceptor for AI responses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Content moderation validation</p>
</li>
<li>
<p>Response sanitization</p>
</li>
<li>
<p>Format normalization</p>
</li>
<li>
<p>Emergency trigger detection</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_topic_boundary_guard">Topic Boundary Guard</h5>
<div class="paragraph">
<p>Enforces conversation topic restrictions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Whitelist: show, friendship, hobbies, learning, imagination, feelings</p>
</li>
<li>
<p>Blocks: personal data requests, inappropriate topics, external links</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_emergency_detector">Emergency Detector</h5>
<div class="paragraph">
<p>Monitors for potential harm/danger indicators:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Triggers immediate safe response</p>
</li>
<li>
<p>Logs event for review (no PII)</p>
</li>
<li>
<p>Suggests seeking adult help</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_stt_adapter">STT Adapter</h5>
<div class="paragraph">
<p>Speech-to-text service integration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Whisper API communication</p>
</li>
<li>
<p>Audio format conversion</p>
</li>
<li>
<p>Multi-language support</p>
</li>
<li>
<p>Error handling with text fallback</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_tts_adapter">TTS Adapter</h5>
<div class="paragraph">
<p>Text-to-speech service integration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ElevenLabs API communication</p>
</li>
<li>
<p>Character voice selection (5 custom voices)</p>
</li>
<li>
<p>Audio streaming optimization</p>
</li>
<li>
<p>Emotion parameter injection</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_parental_service">Parental Service</h5>
<div class="paragraph">
<p>Parental control management:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PIN verification</p>
</li>
<li>
<p>Settings CRUD operations</p>
</li>
<li>
<p>Cross-platform sync (web + mobile)</p>
</li>
<li>
<p>Activity summary generation</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_session_manager">Session Manager</h5>
<div class="paragraph">
<p>Ephemeral session handling:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TTL-based session creation</p>
</li>
<li>
<p>Context storage in Redis</p>
</li>
<li>
<p>Automatic session expiration</p>
</li>
<li>
<p>No persistent data storage</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_cms_proxy">CMS Proxy</h5>
<div class="paragraph">
<p>Content management integration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Multi-tenant CMS queries</p>
</li>
<li>
<p>Platform-specific content filtering</p>
</li>
<li>
<p>Cache invalidation handling</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_structured_logger">Structured Logger</h5>
<div class="paragraph">
<p>Logging service ensuring privacy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No PII in logs</p>
</li>
<li>
<p>Structured JSON format</p>
</li>
<li>
<p>Log level management</p>
</li>
<li>
<p>Correlation ID tracking</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_metrics_collector">Metrics Collector</h5>
<div class="paragraph">
<p>Performance and cost monitoring:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AI inference cost tracking</p>
</li>
<li>
<p>Response time metrics</p>
</li>
<li>
<p>Error rate monitoring</p>
</li>
<li>
<p>Usage analytics (aggregate only)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_runtime_view">2.8. Runtime View</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This documentation describes how components interact at runtime. It includes sequence diagrams showing the flow of key operations, state diagrams for session management, and detailed explanations of critical processes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_ai_interaction_flow_text_chat_kids_website">2.8.1. AI Interaction Flow - Text Chat (Kids Website)</h4>
<div class="paragraph">
<p>The following sequence diagram shows how a child interacts with an AI character through the kids website text chat interface.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-1770760765e093beb8ca785a7fac19ac.png" alt="Diagram" width="1400" height="1301">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_voice_ai_interaction_flow_mobile_app">2.8.2. Voice AI Interaction Flow (Mobile App)</h4>
<div class="paragraph">
<p>The complete voice interaction flow including speech-to-text, AI processing, and text-to-speech with Rive animations.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-d24418611dfb1bbb223ce8da916a0fc7.png" alt="Diagram" width="1525" height="1195">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parental_control_session_flow">2.8.3. Parental Control Session Flow</h4>
<div class="paragraph">
<p>Shows how parental controls are verified and applied across sessions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-7f859d2a5d2958eb4f39a51618b5e64b.png" alt="Diagram" width="1055" height="1402">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_emergency_detection_flow">2.8.4. Emergency Detection Flow</h4>
<div class="paragraph">
<p>Shows how the system handles potential harm/danger mentions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-6ea920583eb6cf9c85120876f9bce365.png" alt="Diagram" width="2290" height="664">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_session_state_machine">2.8.5. Session State Machine</h4>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-6a9ff41b03439dae471ec921417aba16.png" alt="Diagram" width="1114" height="830">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rive_animation_state_machine">2.8.6. Rive Animation State Machine</h4>
<div class="paragraph">
<p>The mobile app characters use state machines for expressive animations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 33.3333%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Trigger</th>
<th class="tableblock halign-left valign-top">Animation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default state</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtle breathing animation, occasional blinks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listening</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User starts speaking</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character leans forward, ears perk up, eyes widen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thinking</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for AI response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character looks up, thought bubble appears, subtle movement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Speaking</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Audio playback starts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lip-sync driven by audio amplitude, expressive gestures</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Happy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Positive sentiment detected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bouncy animation, smile, sparkle effects</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sad sentiment detected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Droopy posture, concerned expression</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Surprised</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unexpected input</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wide eyes, jump animation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sleepy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bedtime mode active</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Half-closed eyes, yawning, slow movements</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_content_delivery_flow">2.8.7. Content Delivery Flow</h4>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-b324fb9a54ae88af9f5c6e4242f9eb9c.png" alt="Diagram" width="1056" height="831">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deployment_view">2.9. Deployment View</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This document describes the deployment architecture, infrastructure setup, CI/CD pipeline, and environment management for the Calimero Digital Platform.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_infrastructure_overview">2.9.1. Infrastructure Overview</h4>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-6587eac8f5e29b5ccecd086e0dbce6f5.png" alt="Diagram" width="2013" height="812">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_environment_configuration">2.9.2. Environment Configuration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">URL</th>
<th class="tableblock halign-left valign-top">Deployment Trigger</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Development</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local development and testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">localhost:3000/3001/4000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Staging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integration testing, QA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">staging.calimero.com, staging-kids.calimero.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push to <code>develop</code> branch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Production</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Live user-facing environment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">calimero.com, kids.calimero.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push to <code>main</code> branch (after approval)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_branching_strategy">2.9.3. Branching Strategy</h4>
<div class="sect4">
<h5 id="_overview_4">Overview</h5>
<div class="paragraph">
<p>The branching strategy ensures code quality and enables rapid iteration while maintaining production stability.</p>
</div>
</div>
<div class="sect4">
<h5 id="_branch_types">Branch Types</h5>
<div class="ulist">
<ul>
<li>
<p><code>main</code> - Production-ready code, protected branch</p>
</li>
<li>
<p><code>develop</code> - Integration branch for features</p>
</li>
<li>
<p><code>feature/*</code> - Feature development branches</p>
</li>
<li>
<p><code>release/*</code> - Release preparation branches</p>
</li>
<li>
<p><code>hotfix/*</code> - Emergency production fixes</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_branch_naming_convention">Branch Naming Convention</h5>
<div class="ulist">
<ul>
<li>
<p><code>feature/voice-ai-integration</code></p>
</li>
<li>
<p><code>feature/parental-controls</code></p>
</li>
<li>
<p><code>feature/rive-animation-states</code></p>
</li>
<li>
<p><code>release/1.0.0</code></p>
</li>
<li>
<p><code>hotfix/1.0.1-safety-filter</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_branch_workflow">Branch Workflow</h5>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-60a4ab193ecc02f5bab8938527dd9a90.png" alt="Diagram" width="557" height="473">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cicd_pipeline">2.9.4. CI/CD Pipeline</h4>
<div class="sect4">
<h5 id="_pipeline_stages">Pipeline Stages</h5>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-b3135cbfdb9086e364dae5833cf1401c.png" alt="Diagram" width="1000" height="1077">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_quality_gates">Quality Gates</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Gate</th>
<th class="tableblock halign-left valign-top">Criteria</th>
<th class="tableblock halign-left valign-top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lint Check</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zero ESLint errors, TypeScript strict mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All branches</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unit Tests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100% pass rate, &gt;80% coverage for critical modules</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All branches</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E Tests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All critical user journeys pass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Staging only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load Tests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;1s response time at 1000 concurrent users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Staging only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA Compliance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automated scan passes, no tracking detected on kids site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-production</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security Scan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No critical/high vulnerabilities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All branches</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_configuration">2.9.5. Deployment Configuration</h4>
<div class="sect4">
<h5 id="_kids_website_vercel">Kids Website (Vercel)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># vercel.json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "regions": ["fra1", "iad1", "sfo1"],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        { "key": "X-Frame-Options", "value": "DENY" },
        { "key": "X-Content-Type-Options", "value": "nosniff" },
        { "key": "Referrer-Policy", "value": "strict-origin" }
      ]
    }
  ],
  "env": {
    "NEXT_PUBLIC_API_URL": "@api-url",
    "NEXT_PUBLIC_PLAUSIBLE_DOMAIN": "kids.calimero.com"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_adult_website_vercel">Adult Website (Vercel)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># vercel.json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "regions": ["fra1", "iad1", "sfo1"],
  "env": {
    "NEXT_PUBLIC_API_URL": "@api-url",
    "NEXTAUTH_URL": "@auth-url",
    "SHOPIFY_STOREFRONT_TOKEN": "@shopify-token"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_backend_dedicated_server">Backend (Dedicated Server)</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># ecosystem.config.js (PM2)
module.exports = {
  apps: [{
    name: 'calimero-backend',
    script: 'dist/main.js',
    instances: 'max',
    exec_mode: 'cluster',
    env_production: {
      NODE_ENV: 'production',
      PORT: 4000,
      REDIS_URL: 'redis://localhost:6379',
      LLM_API_KEY: '***',
      ELEVENLABS_API_KEY: '***',
      WHISPER_API_KEY: '***'
    }
  }]
};</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_mobile_app_react_native">Mobile App (React Native)</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Platform</th>
<th class="tableblock halign-left valign-top">Build &amp; Distribution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iOS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xcode Cloud → TestFlight (beta) → App Store</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Android</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GitHub Actions → Internal Testing → Google Play Store</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_monitoring_observability">2.9.6. Monitoring &amp; Observability</h4>
<div class="sect4">
<h5 id="_metrics_collection">Metrics Collection</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Application Metrics</strong>: Response times, error rates, AI inference latency</p>
</li>
<li>
<p><strong>Infrastructure Metrics</strong>: CPU, memory, disk usage</p>
</li>
<li>
<p><strong>Business Metrics</strong>: Active users, chat sessions, conversion rates (adult site)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_alerting_rules">Alerting Rules</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric</th>
<th class="tableblock halign-left valign-top">Warning</th>
<th class="tableblock halign-left valign-top">Critical</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Rate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;0.5%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;1%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page on-call, investigate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Time (p95)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;500ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;1000ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scale up, investigate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI Latency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;2s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;5s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check LLM provider status</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety Filter Triggers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;10/hour</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;50/hour</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Review patterns, adjust filters</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_log_management">Log Management</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Log Aggregation</strong>: Centralized logging (no PII)</p>
</li>
<li>
<p><strong>Retention</strong>: 30 days standard, 90 days for security logs</p>
</li>
<li>
<p><strong>Access</strong>: Role-based access to logs</p>
</li>
<li>
<p><strong>Audit Trail</strong>: All parental control changes logged</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_disaster_recovery">2.9.7. Disaster Recovery</h4>
<div class="sect4">
<h5 id="_backup_strategy">Backup Strategy</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Backup Frequency</th>
<th class="tableblock halign-left valign-top">Retention</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CMS Content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Daily (automatic)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 days</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">On every change</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indefinite (git)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis Cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not backed up (ephemeral)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_recovery_procedures">Recovery Procedures</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Frontend Issues</strong>: Automatic rollback via Vercel</p>
</li>
<li>
<p><strong>Backend Issues</strong>: PM2 automatic restart + rollback scripts</p>
</li>
<li>
<p><strong>LLM Provider Outage</strong>: Automatic failover to backup provider</p>
</li>
<li>
<p><strong>CDN Issues</strong>: Cloudflare automatic failover between edges</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cross_cutting_concepts">3. Cross-cutting Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_security_concept">3.1. Security Concept</h3>
<div class="sect3">
<h4 id="_overview_5">3.1.1. Overview</h4>
<div class="paragraph">
<p>The Calimero Platform implements a defense-in-depth security strategy with particular emphasis on child safety and COPPA compliance. All security measures are designed to protect both children and adults while enabling the platform&#8217;s AI-powered features.</p>
</div>
</div>
<div class="sect3">
<h4 id="_transport_security">3.1.2. Transport Security</h4>
<div class="ulist">
<ul>
<li>
<p>All external communication encrypted using TLS 1.3</p>
</li>
<li>
<p>HTTPS enforced on all endpoints with HSTS headers</p>
</li>
<li>
<p>Certificate pinning implemented in mobile app</p>
</li>
<li>
<p>Cloudflare SSL termination with origin certificates</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_authentication_authorization">3.1.3. Authentication &amp; Authorization</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Platform</th>
<th class="tableblock halign-left valign-top">Authentication Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kids Website</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No authentication required (COPPA compliance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adult Website</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NextAuth.js with JWT tokens, social OAuth providers (Google, Apple, Facebook)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kids Mobile App</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No user authentication, device-based session only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parental Dashboard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PIN-based access (4-6 digits), stored as bcrypt hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backend API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API key for internal services, JWT for authenticated endpoints</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_ai_safety_architecture">3.1.4. AI Safety Architecture</h4>
<div class="paragraph">
<p>The AI safety layer is the most critical security component, implementing multiple protective measures:</p>
</div>
<div class="sect4">
<h5 id="_input_filtering">Input Filtering</h5>
<div class="ulist">
<ul>
<li>
<p>Sanitization of potentially harmful content</p>
</li>
<li>
<p>PII detection and removal (names, locations, schools)</p>
</li>
<li>
<p>Length and format validation</p>
</li>
<li>
<p>Profanity and inappropriate content filtering</p>
</li>
<li>
<p>Rate limiting per session</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_output_filtering">Output Filtering</h5>
<div class="ulist">
<ul>
<li>
<p>Content moderation validation before delivery</p>
</li>
<li>
<p>Topic boundary enforcement</p>
</li>
<li>
<p>Response sanitization</p>
</li>
<li>
<p>Emergency trigger detection (harm/danger mentions)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_topic_boundaries">Topic Boundaries</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Allowed Topics</th>
<th class="tableblock halign-left valign-top">Blocked Topics</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show characters and stories</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Personal information requests</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Friendship and emotions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location or school information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hobbies and interests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Family details</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Learning and education</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">External links or downloads</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Imagination and creativity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Violence or inappropriate content</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feelings and emotions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commercial manipulation</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_emergency_response_protocol">Emergency Response Protocol</h5>
<div class="paragraph">
<p>When the system detects potential harm/danger indicators:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Immediately provide supportive, age-appropriate response</p>
</li>
<li>
<p>Encourage child to speak with trusted adult</p>
</li>
<li>
<p>Log event (without PII) for review</p>
</li>
<li>
<p>Continue session with heightened monitoring</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cors_policy">3.1.5. CORS Policy</h4>
<div class="ulist">
<ul>
<li>
<p>Strict whitelist-based origin validation</p>
</li>
<li>
<p>Kids site: Only kids.calimero.com allowed</p>
</li>
<li>
<p>Adult site: calimero.com + payment provider domains</p>
</li>
<li>
<p>No wildcard origins permitted</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_data_security">3.1.6. Data Security</h4>
<div class="sect4">
<h5 id="_kids_platform_zero_data">Kids Platform (Zero Data)</h5>
<div class="ulist">
<ul>
<li>
<p>No cookies or localStorage</p>
</li>
<li>
<p>No user accounts or persistent data</p>
</li>
<li>
<p>All conversations ephemeral (in-memory only)</p>
</li>
<li>
<p>No tracking pixels or analytics cookies</p>
</li>
<li>
<p>Plausible analytics (cookieless)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_adult_platform">Adult Platform</h5>
<div class="ulist">
<ul>
<li>
<p>User data encrypted at rest (AES-256)</p>
</li>
<li>
<p>Payment processing via PCI-compliant providers</p>
</li>
<li>
<p>Session data with secure, httpOnly cookies</p>
</li>
<li>
<p>Password hashing with bcrypt (cost factor 12)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_infrastructure_security">3.1.7. Infrastructure Security</h4>
<div class="ulist">
<ul>
<li>
<p>DDoS protection via Cloudflare</p>
</li>
<li>
<p>Web Application Firewall (WAF) rules</p>
</li>
<li>
<p>Rate limiting at CDN and application level</p>
</li>
<li>
<p>Secrets management (environment variables, never in code)</p>
</li>
<li>
<p>Regular security dependency scanning (npm audit)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_security_audits">3.1.8. Security Audits</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Audit Type</th>
<th class="tableblock halign-left valign-top">Frequency</th>
<th class="tableblock halign-left valign-top">Scope</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA Compliance Audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before launch + annually</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kids website and mobile app</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Penetration Testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarterly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All public endpoints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI Safety Review</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input/output filter effectiveness</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency Scan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Weekly (automated)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All npm packages</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_performance_optimization">3.2. Performance Optimization</h3>
<div class="sect3">
<h4 id="_overview_6">3.2.1. Overview</h4>
<div class="paragraph">
<p>The Calimero Platform is optimized for fast, responsive user experiences across all touchpoints. Special attention is given to voice AI latency and mobile app performance to ensure engaging interactions for children.</p>
</div>
</div>
<div class="sect3">
<h4 id="_performance_targets">3.2.2. Performance Targets</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric</th>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Measurement</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page Load Time (LCP)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;2.5 seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core Web Vitals</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to Interactive (TTI)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;3.5 seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lighthouse</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">First Input Delay (FID)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;100ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core Web Vitals</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cumulative Layout Shift (CLS)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;0.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core Web Vitals</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Response Time (p95)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;500ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application metrics</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voice AI Round Trip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;2 seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End-to-end measurement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text AI Response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;1 second</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application metrics</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_caching_strategy">3.2.3. Caching Strategy</h4>
<div class="sect4">
<h5 id="_cdn_caching_cloudflare">CDN Caching (Cloudflare)</h5>
<div class="ulist">
<ul>
<li>
<p>Static assets cached at edge (1 year TTL)</p>
</li>
<li>
<p>HTML pages with appropriate cache-control headers</p>
</li>
<li>
<p>Image optimization with WebP conversion</p>
</li>
<li>
<p>Automatic minification (JS, CSS, HTML)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_application_caching_redis">Application Caching (Redis)</h5>
<div class="ulist">
<ul>
<li>
<p>Session memory with TTL-based expiration</p>
</li>
<li>
<p>CMS content cache (5-minute TTL)</p>
</li>
<li>
<p>Rate limiting counters</p>
</li>
<li>
<p>No persistent conversation storage</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_next_js_caching">Next.js Caching</h5>
<div class="ulist">
<ul>
<li>
<p>Static Site Generation (SSG) for stable content</p>
</li>
<li>
<p>Incremental Static Regeneration (ISR) for dynamic content</p>
</li>
<li>
<p>On-demand revalidation for content updates</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ai_performance_optimization">3.2.4. AI Performance Optimization</h4>
<div class="sect4">
<h5 id="_voice_pipeline_optimization">Voice Pipeline Optimization</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Voice AI Latency Budget Breakdown</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Target Latency</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Speech-to-Text (Whisper)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">400ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Using whisper.cpp for optimized inference</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI Processing (LLM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">800ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Streaming responses, prompt caching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text-to-Speech (ElevenLabs)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-loaded voice models, streaming audio</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network Overhead</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CDN edge caching, connection pooling</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Total Latency Budget</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>2000ms</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>End-to-end voice interaction target</strong></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Audio streaming (not waiting for complete utterance)</p>
</li>
<li>
<p>Parallel processing where possible</p>
</li>
<li>
<p>Response streaming from LLM</p>
</li>
<li>
<p>Pre-loaded character voice models</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_text_chat_optimization">Text Chat Optimization</h5>
<div class="ulist">
<ul>
<li>
<p>LLM response streaming</p>
</li>
<li>
<p>Prompt caching for character personas</p>
</li>
<li>
<p>Session context limiting (last N exchanges)</p>
</li>
<li>
<p>Async safety filtering</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_frontend_performance">3.2.5. Frontend Performance</h4>
<div class="sect4">
<h5 id="_kids_website">Kids Website</h5>
<div class="ulist">
<ul>
<li>
<p>SSG for all main pages</p>
</li>
<li>
<p>Lazy loading for images and videos</p>
</li>
<li>
<p>Preloading critical assets</p>
</li>
<li>
<p>Minimal JavaScript bundle (no analytics libraries)</p>
</li>
<li>
<p>Rive animations loaded on-demand</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_adult_website">Adult Website</h5>
<div class="ulist">
<ul>
<li>
<p>ISR for product pages</p>
</li>
<li>
<p>Image lazy loading with blur placeholders</p>
</li>
<li>
<p>Code splitting by route</p>
</li>
<li>
<p>Shopify Storefront API with GraphQL (minimal data)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_mobile_app">Mobile App</h5>
<div class="ulist">
<ul>
<li>
<p>Native compilation via React Native</p>
</li>
<li>
<p>Rive animations pre-compiled</p>
</li>
<li>
<p>Offline-capable with local caching</p>
</li>
<li>
<p>Background audio processing</p>
</li>
<li>
<p>Optimized bundle size (&lt;50MB)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_load_handling">3.2.6. Load Handling</h4>
<div class="sect4">
<h5 id="_expected_load_profile">Expected Load Profile</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Time Period</th>
<th class="tableblock halign-left valign-top">Expected Concurrent Users</th>
<th class="tableblock halign-left valign-top">Peak Factor</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Morning (6-9 AM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">After School (3-6 PM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4x (peak)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evening (6-9 PM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bedtime (7-9 PM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Night (9 PM - 6 AM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.2x</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_scaling_strategy">Scaling Strategy</h5>
<div class="ulist">
<ul>
<li>
<p>Vercel auto-scaling for frontends</p>
</li>
<li>
<p>PM2 cluster mode for backend (utilize all CPU cores)</p>
</li>
<li>
<p>Redis for session distribution</p>
</li>
<li>
<p>LLM provider rate limit management</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_network_optimization">3.2.7. Network Optimization</h4>
<div class="ulist">
<ul>
<li>
<p>HTTP/2 enabled</p>
</li>
<li>
<p>Brotli compression</p>
</li>
<li>
<p>DNS prefetching for external APIs</p>
</li>
<li>
<p>Connection keep-alive</p>
</li>
<li>
<p>Geographic distribution (Vercel regions: FRA, IAD, SFO)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_monitoring_and_logging">3.3. Monitoring and Logging</h3>
<div class="sect3">
<h4 id="_overview_7">3.3.1. Overview</h4>
<div class="paragraph">
<p>The Calimero Platform implements comprehensive monitoring and logging with strict privacy requirements. No Personally Identifiable Information (PII) is logged, especially for the kids platform.</p>
</div>
</div>
<div class="sect3">
<h4 id="_logging_architecture">3.3.2. Logging Architecture</h4>
<div class="sect4">
<h5 id="_structured_logging">Structured Logging</h5>
<div class="paragraph">
<p>All logs use JSON format for easy parsing and analysis:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "timestamp": "2025-12-17T10:30:00.000Z",
  "level": "info",
  "service": "ai-orchestrator",
  "correlationId": "abc123",
  "event": "ai_response_generated",
  "characterId": "calimero",
  "responseTimeMs": 450,
  "platform": "kids-web"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_log_levels">Log Levels</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Level</th>
<th class="tableblock halign-left valign-top">Usage</th>
<th class="tableblock halign-left valign-top">Retention</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System errors, failed requests, critical issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">90 days</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WARN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety filter triggers, rate limits, degraded performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60 days</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Normal operations, feature usage, business events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 days</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEBUG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Detailed technical information (staging only)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 days</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_privacy_safe_logging">Privacy-Safe Logging</h5>
<div class="paragraph">
<p><strong>NEVER logged:</strong>
* User conversations or chat content
* Voice audio data
* Personal identifiers (names, emails)
* IP addresses (hashed only)
* Device identifiers (anonymized)</p>
</div>
<div class="paragraph">
<p><strong>Always logged:</strong>
* Correlation IDs for request tracing
* Anonymized session identifiers
* Performance metrics
* Error details (sanitized)
* Feature usage (aggregate)</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metrics_collection_2">3.3.3. Metrics Collection</h4>
<div class="sect4">
<h5 id="_application_metrics">Application Metrics</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>http_requests_total</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total HTTP requests by endpoint, method, status</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>http_request_duration_seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Histogram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request latency distribution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ai_inference_duration_seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Histogram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM response time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>voice_pipeline_duration_seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Histogram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End-to-end voice processing time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>safety_filter_triggers_total</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety filter activations by type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>active_sessions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current active AI sessions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ai_cost_cents</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estimated AI API costs</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_business_metrics">Business Metrics</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Daily Active Users (DAU)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique sessions per platform per day</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session Duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average time spent in AI conversations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character Popularity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Distribution of AI character selections</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature Usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Games played, videos watched, chats initiated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conversion Rate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adult site: visitors to purchases</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_monitoring_dashboards">3.3.4. Monitoring Dashboards</h4>
<div class="sect4">
<h5 id="_platform_health_dashboard">Platform Health Dashboard</h5>
<div class="ulist">
<ul>
<li>
<p>Request rate and error rate</p>
</li>
<li>
<p>Response time percentiles (p50, p95, p99)</p>
</li>
<li>
<p>Active sessions by platform</p>
</li>
<li>
<p>Infrastructure utilization (CPU, memory)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ai_performance_dashboard">AI Performance Dashboard</h5>
<div class="ulist">
<ul>
<li>
<p>LLM inference latency</p>
</li>
<li>
<p>Voice pipeline latency breakdown</p>
</li>
<li>
<p>Provider availability status</p>
</li>
<li>
<p>Cost tracking per provider</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_safety_dashboard_restricted_access">Safety Dashboard (Restricted Access)</h5>
<div class="ulist">
<ul>
<li>
<p>Safety filter trigger frequency</p>
</li>
<li>
<p>Emergency detection events</p>
</li>
<li>
<p>Topic boundary violations</p>
</li>
<li>
<p>Trend analysis for patterns</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_business_dashboard">Business Dashboard</h5>
<div class="ulist">
<ul>
<li>
<p>User engagement metrics</p>
</li>
<li>
<p>Feature adoption rates</p>
</li>
<li>
<p>Geographic distribution</p>
</li>
<li>
<p>Platform comparison</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_alerting_rules_2">3.3.5. Alerting Rules</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Alert</th>
<th class="tableblock halign-left valign-top">Condition</th>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Response</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">High Error Rate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;1% of requests failing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page on-call, investigate immediately</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slow Response Time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">p95 &gt;1s for 5 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Investigate, scale if needed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM Provider Down</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No successful responses for 1 minute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trigger failover, page on-call</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">High Safety Triggers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;50 triggers/hour</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Review patterns, adjust filters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emergency Detection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any emergency trigger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Review event, assess patterns</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis Connection Failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection errors &gt;10/minute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restart service, investigate</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_incident_response">3.3.6. Incident Response</h4>
<div class="sect4">
<h5 id="_severity_levels">Severity Levels</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Level</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Response Time</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1 - Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform down, security breach, safety incident</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;15 minutes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2 - High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Major feature broken, significant degradation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;1 hour</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P3 - Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor feature issue, limited impact</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;4 hours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P4 - Low</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cosmetic issues, minor bugs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Next business day</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_on_call_rotation">On-Call Rotation</h5>
<div class="ulist">
<ul>
<li>
<p>24/7 on-call rotation for P1/P2 issues</p>
</li>
<li>
<p>Escalation path: On-call → Tech Lead → CTO</p>
</li>
<li>
<p>Runbooks for common incidents</p>
</li>
<li>
<p>Post-incident reviews for all P1/P2 events</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_protection_and_privacy">3.4. Data Protection and Privacy</h3>
<div class="sect3">
<h4 id="_overview_8">3.4.1. Overview</h4>
<div class="paragraph">
<p>The Calimero Platform operates under strict data protection requirements, with COPPA compliance being the primary regulatory framework for the kids platform. The adult platform follows GDPR principles for European users.</p>
</div>
</div>
<div class="sect3">
<h4 id="_regulatory_framework">3.4.2. Regulatory Framework</h4>
<div class="sect4">
<h5 id="_coppa_childrens_online_privacy_protection_act">COPPA (Children&#8217;s Online Privacy Protection Act)</h5>
<div class="paragraph">
<p>The kids platform (kids.calimero.com and mobile app) is fully COPPA compliant:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">COPPA Requirement</th>
<th class="tableblock halign-left valign-top">Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No data collection from children under 13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zero personal data collected - no accounts, no forms, no cookies</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verifiable parental consent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not required as no data is collected</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Privacy policy accessible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear, child-friendly privacy notice available</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parental access to data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No data to access - fully ephemeral</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secure data handling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No data stored - all conversations in-memory only</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_gdpr_general_data_protection_regulation">GDPR (General Data Protection Regulation)</h5>
<div class="paragraph">
<p>The adult platform complies with GDPR for EU users:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Explicit consent for data collection</p>
</li>
<li>
<p>Right to access, rectify, and delete data</p>
</li>
<li>
<p>Data portability support</p>
</li>
<li>
<p>Privacy by design and default</p>
</li>
<li>
<p>Data Processing Agreements with all vendors</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_classification">3.4.3. Data Classification</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top">Examples</th>
<th class="tableblock halign-left valign-top">Kids Platform</th>
<th class="tableblock halign-left valign-top">Adult Platform</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Public</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Product info, content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allowed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allowed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Analytics, logs (no PII)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anonymized only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allowed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Confidential</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User emails, orders</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROHIBITED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encrypted storage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restricted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Payment data, passwords</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROHIBITED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI-compliant handling</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chat Content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI conversations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Never stored</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Never stored</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_kids_platform_data_handling">3.4.4. Kids Platform Data Handling</h4>
<div class="sect4">
<h5 id="_zero_data_collection_policy">Zero Data Collection Policy</h5>
<div class="paragraph">
<p>The kids platform implements a strict zero data collection policy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>No Cookies</strong>: No cookies of any kind set</p>
</li>
<li>
<p><strong>No Local Storage</strong>: No browser storage used</p>
</li>
<li>
<p><strong>No User Accounts</strong>: All features accessible anonymously</p>
</li>
<li>
<p><strong>No Forms</strong>: No input fields for personal information</p>
</li>
<li>
<p><strong>No Tracking</strong>: No analytics that could identify users</p>
</li>
<li>
<p><strong>No Chat History</strong>: All AI conversations are ephemeral</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_analytics_cookieless">Analytics (Cookieless)</h5>
<div class="paragraph">
<p>Plausible Analytics is used for aggregate insights:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Page views by URL</p>
</li>
<li>
<p>Geographic region (country level only)</p>
</li>
<li>
<p>Device type and browser</p>
</li>
<li>
<p>Referrer source</p>
</li>
<li>
<p>No user identification possible</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_session_data">Session Data</h5>
<div class="paragraph">
<p>Session data is stored in Redis with strict controls:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TTL-based automatic expiration (30 minutes)</p>
</li>
<li>
<p>No association with user identity</p>
</li>
<li>
<p>Contains only conversation context (not content)</p>
</li>
<li>
<p>Automatically deleted on session end</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adult_platform_data_handling">3.4.5. Adult Platform Data Handling</h4>
<div class="sect4">
<h5 id="_data_collected">Data Collected</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data Type</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">Retention</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Account authentication, order confirmations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Until account deletion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order shipping, personalization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Until account deletion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shipping address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order fulfillment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Until account deletion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Payment method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processed by Stripe/PayPal (not stored)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not stored locally</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order history</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Customer service, recommendations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 years (legal requirement)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preferences</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wishlist, notifications</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Until account deletion</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_user_rights">User Rights</h5>
<div class="paragraph">
<p>Users can exercise their rights via account settings or support:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Access</strong>: Download all personal data</p>
</li>
<li>
<p><strong>Rectification</strong>: Edit profile information</p>
</li>
<li>
<p><strong>Erasure</strong>: Delete account and all data</p>
</li>
<li>
<p><strong>Portability</strong>: Export data in JSON format</p>
</li>
<li>
<p><strong>Object</strong>: Opt-out of marketing</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ai_conversation_privacy">3.4.6. AI Conversation Privacy</h4>
<div class="paragraph">
<p>AI conversations are treated with the highest privacy standards:</p>
</div>
<div class="sect4">
<h5 id="_what_happens_to_conversations">What Happens to Conversations</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User input received</p>
</li>
<li>
<p>Processed through safety filters (not logged)</p>
</li>
<li>
<p>Sent to LLM provider (see vendor section)</p>
</li>
<li>
<p>Response delivered to user</p>
</li>
<li>
<p>Context held in memory (TTL)</p>
</li>
<li>
<p><strong>Automatically deleted after session</strong></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_what_is_never_done">What Is NEVER Done</h5>
<div class="ulist">
<ul>
<li>
<p>Conversations are never stored in databases</p>
</li>
<li>
<p>Conversations are never used for training</p>
</li>
<li>
<p>Conversations are never logged</p>
</li>
<li>
<p>Audio files are never saved</p>
</li>
<li>
<p>No human reviews conversation content</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_vendor_data_processing">3.4.7. Vendor Data Processing</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Vendor</th>
<th class="tableblock halign-left valign-top">Data Shared</th>
<th class="tableblock halign-left valign-top">Safeguards</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Together AI / Claude</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conversation text (no PII)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DPA signed, no training on data, auto-delete</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElevenLabs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TTS text only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DPA signed, no storage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whisper API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Audio for transcription</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DPA signed, immediate deletion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plausible Analytics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate page views</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No PII, EU hosting</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stripe/PayPal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Payment processing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI DSS compliant, no card storage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shopify</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E-commerce data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DPA signed, GDPR compliant</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_data_protection_impact_assessment">3.4.8. Data Protection Impact Assessment</h4>
<div class="paragraph">
<p>A DPIA was conducted covering:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AI interaction with children</p>
</li>
<li>
<p>Voice data processing</p>
</li>
<li>
<p>Cross-border data transfers</p>
</li>
<li>
<p>Third-party vendor risks</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Key findings and mitigations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Risk</th>
<th class="tableblock halign-left valign-top">Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child data collection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zero collection policy implemented</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI safety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-layer safety filtering, topic boundaries</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voice data misuse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate deletion, no storage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vendor data handling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DPAs with all vendors, regular audits</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_breach_response_plan">3.4.9. Breach Response Plan</h4>
<div class="paragraph">
<p>In the unlikely event of a data breach:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Immediate</strong>: Contain and assess scope</p>
</li>
<li>
<p><strong>Within 24 hours</strong>: Notify legal and executive team</p>
</li>
<li>
<p><strong>Within 72 hours</strong>: Report to supervisory authority (GDPR)</p>
</li>
<li>
<p><strong>ASAP</strong>: Notify affected users if high risk</p>
</li>
<li>
<p><strong>Post-incident</strong>: Review and improve controls</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture_decisions">4. Architecture Decisions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Architecture Decision Records (ADRs) serve several important purposes and follow a specific process. Here&#8217;s an explanation of their purpose and process:</p>
</div>
<div class="paragraph">
<p>Purpose of ADRs:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Document key decisions: ADRs capture significant architectural decisions made during the design and development of a software system <a href="https://learn.microsoft.com/en-us/azure/well-architected/architect-role/architecture-decision-record">1</a> <a href="https://adr.github.io">2</a>.</p>
</li>
<li>
<p>Provide context: They explain the context, rationale, and consequences of each decision <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Create a decision log: ADRs collectively form a decision log that provides project context and detailed implementation information <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Facilitate communication: They help team members understand and communicate design choices <a href="https://endjin.com/blog/2023/07/architecture-decision-records">4</a>.</p>
</li>
<li>
<p>Support future reference: ADRs serve as a reference for code and architectural reviews <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Track evolution: They allow documentation to reflect specific states of a system over time <a href="https://endjin.com/blog/2023/07/architecture-decision-records">4</a>.</p>
</li>
<li>
<p>Evidence thinking process: ADRs demonstrate the reasoning behind decisions, which can be valuable for audits or future team members <a href="https://endjin.com/blog/2023/07/architecture-decision-records">4</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Process of creating and using ADRs:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Identification: Recognize an architecturally significant decision that needs to be made <a href="https://learn.microsoft.com/en-us/azure/well-architected/architect-role/architecture-decision-record">1</a> <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Authorship: An team member (ADR owner) creates a new ADR document <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Content creation: The ADR owner fills in the required sections, typically including:</p>
<div class="ulist">
<ul>
<li>
<p>Title</p>
</li>
<li>
<p>Status (e.g., proposed, accepted, rejected)</p>
</li>
<li>
<p>Context and problem statement</p>
</li>
<li>
<p>Decision drivers</p>
</li>
<li>
<p>Considered options</p>
</li>
<li>
<p>Decision outcome</p>
</li>
<li>
<p>Pros and cons</p>
</li>
<li>
<p>Mitigation strategy <a href="https://endjin.com/blog/2023/07/architecture-decision-records">4</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Review: The team reviews the proposed ADR, often using a pull request process in a version control system <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a> <a href="https://endjin.com/blog/2023/07/architecture-decision-records">4</a>.</p>
</li>
<li>
<p>Revision: If necessary, the ADR owner makes revisions based on team feedback <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Acceptance or Rejection: The team decides to accept, reject, or request further work on the ADR <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Finalization: If accepted, the ADR owner updates the status, adds a timestamp, version, and list of stakeholders <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Storage: ADRs are typically stored as plain text (often Markdown) files in a version control system, usually in a <code>/docs/adrs</code> folder within the project repository <a href="https://endjin.com/blog/2023/07/architecture-decision-records">4</a>.</p>
</li>
<li>
<p>Ongoing use: The team refers to ADRs during development, code reviews, and future decision-making processes <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
<li>
<p>Superseding: If a decision changes, a new ADR is created to supersede the old one, rather than modifying the original ADR <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">3</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By following this process, teams can maintain a clear, versioned history of important decisions throughout a project&#8217;s lifecycle, improving communication, understanding, and long-term maintainability of the software architecture.</p>
</div>
<div class="sect2">
<h3 id="_adr_001_llm_provider_selection_for_ai_companions">4.1. ADR 001: LLM Provider Selection for AI Companions</h3>
<div class="paragraph">
<p><strong>Status</strong>: Accepted</p>
</div>
<div class="paragraph">
<p><strong>Date</strong>: December 2025</p>
</div>
<div class="paragraph">
<p><strong>Context</strong>:
The Calimero Platform requires an LLM (Large Language Model) provider to power AI companion conversations for children. The selection must consider:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Child safety capabilities and content moderation</p>
</li>
<li>
<p>Response quality and natural conversation flow</p>
</li>
<li>
<p>Latency requirements (&lt;1 second for text, &lt;2 seconds for voice pipeline)</p>
</li>
<li>
<p>Cost efficiency at scale (millions of monthly interactions)</p>
</li>
<li>
<p>Provider reliability and uptime guarantees</p>
</li>
<li>
<p>Data privacy and COPPA compliance</p>
</li>
<li>
<p>Multi-language support (Italian, French, English)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Evaluated options:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>OpenAI GPT-4</strong> - Industry leader, excellent quality, higher cost</p>
</li>
<li>
<p><strong>Anthropic Claude</strong> - Strong safety focus, good quality, moderate cost</p>
</li>
<li>
<p><strong>Together AI</strong> - Cost-effective, good quality, flexible deployment</p>
</li>
<li>
<p><strong>Self-hosted open-source</strong> - Full control, high infrastructure cost</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Decision:</strong>
We will use <strong>Together AI</strong> as the primary LLM provider with <strong>Anthropic Claude</strong> as the backup/failover provider.</p>
</div>
<div class="paragraph">
<p><strong>Rationale:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Together AI offers excellent cost-to-quality ratio for high-volume usage</p>
</li>
<li>
<p>Together AI provides multiple model options for optimization</p>
</li>
<li>
<p>Claude&#8217;s Constitutional AI approach aligns with child safety requirements</p>
</li>
<li>
<p>Both providers have strong data privacy commitments (no training on user data)</p>
</li>
<li>
<p>Provider abstraction layer allows easy switching if needed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong>:</p>
</div>
<div class="paragraph">
<p><strong>Positive:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cost-effective scaling for MVP and beyond</p>
</li>
<li>
<p>Dual-provider strategy ensures high availability</p>
</li>
<li>
<p>Both providers support required languages</p>
</li>
<li>
<p>Strong safety capabilities from both providers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Negative:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Need to maintain abstraction layer for provider switching</p>
</li>
<li>
<p>Slightly different response characteristics between providers</p>
</li>
<li>
<p>Additional complexity in failover logic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Mitigation:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Implement robust LLM adapter with unified interface</p>
</li>
<li>
<p>Tune prompts for consistency across providers</p>
</li>
<li>
<p>Automated failover with health checks</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adr_002_subdomain_architecture_for_audience_separation">4.2. ADR 002: Subdomain Architecture for Audience Separation</h3>
<div class="paragraph">
<p><strong>Status</strong>: Accepted</p>
</div>
<div class="paragraph">
<p><strong>Date</strong>: December 2025</p>
</div>
<div class="paragraph">
<p><strong>Context</strong>:
The Calimero Platform must serve two fundamentally different audiences with opposing requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Children (Ages 4-12)</strong>: COPPA compliance, zero data collection, safe content, playful design</p>
</li>
<li>
<p><strong>Adults (Ages 18-50)</strong>: E-commerce, user accounts, analytics, sophisticated design</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Options considered:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Single site with age gate</strong> - One codebase, user selects audience type</p>
</li>
<li>
<p><strong>Subdomain model (LEGO style)</strong> - Separate sites: kids.calimero.com + calimero.com</p>
</li>
<li>
<p><strong>Completely separate domains</strong> - Different domains entirely</p>
</li>
<li>
<p><strong>Single site with dynamic content</strong> - Same site, different content based on context</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Decision:</strong>
We will implement the <strong>subdomain model</strong> with completely separate deployments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>kids.calimero.com</code> - Dedicated kids experience</p>
</li>
<li>
<p><code>calimero.com</code> - Adult/commerce site</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A pop-up gate on first visit to calimero.com allows users to choose their experience.</p>
</div>
<div class="paragraph">
<p><strong>Rationale:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clear technical and legal separation for COPPA compliance</p>
</li>
<li>
<p>Separate deployments enable independent scaling and updates</p>
</li>
<li>
<p>Follows proven model (LEGO, Disney, etc.)</p>
</li>
<li>
<p>Simplifies compliance audits (kids site is isolated)</p>
</li>
<li>
<p>Different design systems without conflicts</p>
</li>
<li>
<p>Independent performance optimization</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong>:</p>
</div>
<div class="paragraph">
<p><strong>Positive:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Complete COPPA compliance isolation</p>
</li>
<li>
<p>Independent deployment and scaling</p>
</li>
<li>
<p>Clear audit boundaries</p>
</li>
<li>
<p>Separate analytics and tracking (none for kids)</p>
</li>
<li>
<p>Team can work on sites independently</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Negative:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Two codebases to maintain</p>
</li>
<li>
<p>Shared components need careful management</p>
</li>
<li>
<p>Cross-site navigation requires explicit handling</p>
</li>
<li>
<p>Two Vercel deployments (additional cost)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Mitigation:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Shared component library for common elements</p>
</li>
<li>
<p>Monorepo structure for code sharing</p>
</li>
<li>
<p>Clear documentation of shared vs. site-specific code</p>
</li>
<li>
<p>Consistent API contract between frontends and backend</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adr_003_centralized_ai_backend_architecture">4.3. ADR 003: Centralized AI Backend Architecture</h3>
<div class="paragraph">
<p><strong>Status</strong>: Accepted</p>
</div>
<div class="paragraph">
<p><strong>Date</strong>: December 2025</p>
</div>
<div class="paragraph">
<p><strong>Context</strong>:
All AI interactions (text chat on web, voice conversations on mobile) require safety filtering, content moderation, and consistent behavior across platforms. The architecture must ensure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Consistent safety filtering across all touchpoints</p>
</li>
<li>
<p>Centralized rate limiting and cost control</p>
</li>
<li>
<p>Single point for AI provider management</p>
</li>
<li>
<p>Uniform logging and monitoring (without PII)</p>
</li>
<li>
<p>Session management for conversation context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Options considered:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Direct client-to-LLM</strong> - Clients call LLM APIs directly</p>
</li>
<li>
<p><strong>Centralized NestJS backend</strong> - All AI traffic through single backend</p>
</li>
<li>
<p><strong>Edge functions</strong> - AI processing at CDN edge</p>
</li>
<li>
<p><strong>Microservices</strong> - Separate services per concern</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Decision:</strong>
We will implement a <strong>centralized NestJS backend</strong> that routes all AI traffic. No client will communicate directly with LLM providers.</p>
</div>
<div class="paragraph">
<p>Architecture:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[Clients] → [NestJS Backend] → [LLM/STT/TTS APIs]
                  ↓
           [Safety Layer]
           [Session Manager]
           [Cost Tracker]</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Rationale:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Single point for safety filtering (critical for kids platform)</p>
</li>
<li>
<p>Centralized prompt injection for character personas</p>
</li>
<li>
<p>Unified session management</p>
</li>
<li>
<p>Cost tracking and rate limiting in one place</p>
</li>
<li>
<p>API keys never exposed to clients</p>
</li>
<li>
<p>Easy provider switching without client updates</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong>:</p>
</div>
<div class="paragraph">
<p><strong>Positive:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Complete control over AI interactions</p>
</li>
<li>
<p>Consistent safety across all platforms</p>
</li>
<li>
<p>Simplified client implementations</p>
</li>
<li>
<p>Centralized monitoring and alerting</p>
</li>
<li>
<p>Easy A/B testing of prompts</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Negative:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Single point of failure (mitigated by redundancy)</p>
</li>
<li>
<p>Additional network hop adds latency</p>
</li>
<li>
<p>Backend scaling must match demand</p>
</li>
<li>
<p>All AI costs visible in one system</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Mitigation:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>PM2 cluster mode for high availability</p>
</li>
<li>
<p>Response streaming to minimize perceived latency</p>
</li>
<li>
<p>Horizontal scaling capability</p>
</li>
<li>
<p>Redis for distributed session management</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adr_004_ephemeral_conversation_storage">4.4. ADR 004: Ephemeral Conversation Storage</h3>
<div class="paragraph">
<p><strong>Status</strong>: Accepted</p>
</div>
<div class="paragraph">
<p><strong>Date</strong>: December 2025</p>
</div>
<div class="paragraph">
<p><strong>Context</strong>:
AI companion conversations require context management for natural multi-turn dialogue. However, the platform must also ensure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>COPPA compliance (no persistent data on kids)</p>
</li>
<li>
<p>User privacy protection</p>
</li>
<li>
<p>Simplified data management</p>
</li>
<li>
<p>Reduced liability from stored conversations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Options considered:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Persistent database storage</strong> - Store all conversations in database</p>
</li>
<li>
<p><strong>User-controlled storage</strong> - Let users opt-in to save conversations</p>
</li>
<li>
<p><strong>Ephemeral in-memory storage</strong> - Session-only, auto-expiring</p>
</li>
<li>
<p><strong>No context at all</strong> - Every message is independent</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Decision:</strong>
We will implement <strong>ephemeral in-memory storage</strong> using Redis with TTL-based expiration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Conversation context stored in Redis</p>
</li>
<li>
<p>Session TTL: 30 minutes of inactivity</p>
</li>
<li>
<p>No persistence to disk</p>
</li>
<li>
<p>Automatic deletion on session end</p>
</li>
<li>
<p>No conversation recovery possible</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Rationale:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maintains natural conversation flow within a session</p>
</li>
<li>
<p>Complete COPPA compliance (no persistent child data)</p>
</li>
<li>
<p>Simplified data handling and compliance</p>
</li>
<li>
<p>Reduced security and privacy risks</p>
</li>
<li>
<p>No data retention requirements to manage</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong>:</p>
</div>
<div class="paragraph">
<p><strong>Positive:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Full COPPA compliance by design</p>
</li>
<li>
<p>No conversation data to breach</p>
</li>
<li>
<p>Simplified privacy policy</p>
</li>
<li>
<p>No data retention management needed</p>
</li>
<li>
<p>Users start fresh each session</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Negative:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cannot personalize over time</p>
</li>
<li>
<p>No conversation history for users</p>
</li>
<li>
<p>Lost context on session timeout</p>
</li>
<li>
<p>Cannot analyze conversation quality</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Mitigation:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Friendly session timeout warnings</p>
</li>
<li>
<p>Quick re-engagement after timeout</p>
</li>
<li>
<p>Character personas provide consistency</p>
</li>
<li>
<p>Aggregate metrics (not content) for quality analysis</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adr_005_react_native_for_mobile_app_development">4.5. ADR 005: React Native for Mobile App Development</h3>
<div class="paragraph">
<p><strong>Status</strong>: Accepted</p>
</div>
<div class="paragraph">
<p><strong>Date</strong>: December 2025</p>
</div>
<div class="paragraph">
<p><strong>Context</strong>:
The Calimero Kids Mobile App must be available on both iOS and Android with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Voice AI interactions with low latency</p>
</li>
<li>
<p>Rive animations with lip-sync</p>
</li>
<li>
<p>Offline capabilities</p>
</li>
<li>
<p>Native performance feel</p>
</li>
<li>
<p>Fast development within 8-week timeline</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Options considered:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Native development (Swift + Kotlin)</strong> - Best performance, highest cost</p>
</li>
<li>
<p><strong>React Native</strong> - Cross-platform, JavaScript/TypeScript</p>
</li>
<li>
<p><strong>Flutter</strong> - Cross-platform, Dart language</p>
</li>
<li>
<p><strong>Progressive Web App (PWA)</strong> - Web-based, limited native features</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Decision:</strong>
We will use <strong>React Native</strong> with TypeScript for the mobile app development.</p>
</div>
<div class="paragraph">
<p><strong>Rationale:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Single codebase for iOS and Android</p>
</li>
<li>
<p>Team expertise in TypeScript (shared with web)</p>
</li>
<li>
<p>Excellent Rive animation support</p>
</li>
<li>
<p>Strong audio APIs for voice features</p>
</li>
<li>
<p>Large ecosystem and community</p>
</li>
<li>
<p>Code sharing potential with web apps</p>
</li>
<li>
<p>Faster development than native</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong>:</p>
</div>
<div class="paragraph">
<p><strong>Positive:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Single codebase reduces development time by ~40%</p>
</li>
<li>
<p>TypeScript consistency across all platforms</p>
</li>
<li>
<p>Hot reloading speeds development</p>
</li>
<li>
<p>Large community and library ecosystem</p>
</li>
<li>
<p>Rive integration well-supported</p>
</li>
<li>
<p>Native modules available for audio/voice</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Negative:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Slightly lower performance than pure native</p>
</li>
<li>
<p>Some platform-specific code still needed</p>
</li>
<li>
<p>Dependency on React Native release cycle</p>
</li>
<li>
<p>Bundle size larger than native</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Mitigation:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use Hermes engine for better performance</p>
</li>
<li>
<p>Native modules for performance-critical features</p>
</li>
<li>
<p>Thorough testing on both platforms</p>
</li>
<li>
<p>Performance profiling and optimization</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adr_006_voice_ai_technology_stack_selection">4.6. ADR 006: Voice AI Technology Stack Selection</h3>
<div class="paragraph">
<p><strong>Status</strong>: Accepted</p>
</div>
<div class="paragraph">
<p><strong>Date</strong>: December 2025</p>
</div>
<div class="paragraph">
<p><strong>Context</strong>:
The mobile app requires voice AI interactions with character companions. The voice pipeline must:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Convert child speech to text accurately (multiple languages)</p>
</li>
<li>
<p>Generate character-specific voice responses</p>
</li>
<li>
<p>Achieve &lt;2 second total latency</p>
</li>
<li>
<p>Support custom voice training for 5 characters</p>
</li>
<li>
<p>Work reliably across varying audio quality</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Options considered:</p>
</div>
<div class="paragraph">
<p><strong>Speech-to-Text (STT):</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>OpenAI Whisper API - High accuracy, good multilingual</p>
</li>
<li>
<p>Google Cloud Speech-to-Text - Fast, good quality</p>
</li>
<li>
<p>AWS Transcribe - Integrated with AWS ecosystem</p>
</li>
<li>
<p>AssemblyAI - Good accuracy, streaming support</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Text-to-Speech (TTS):</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ElevenLabs - Best voice cloning, expressive</p>
</li>
<li>
<p>Google Cloud TTS - Good quality, many voices</p>
</li>
<li>
<p>Amazon Polly - Cost-effective, reliable</p>
</li>
<li>
<p>Azure Neural TTS - Good quality, multilingual</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Decision:</strong>
We will use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>STT</strong>: OpenAI Whisper API (with native device fallback)</p>
</li>
<li>
<p><strong>TTS</strong>: ElevenLabs with custom-trained voices per character</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Voice characteristics for 5 characters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Character</th>
<th class="tableblock halign-left valign-top">Voice Profile</th>
<th class="tableblock halign-left valign-top">Language Accent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calimero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warm, empathetic, slight crack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Italian-influenced</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Priscilla</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soft, melodic, nurturing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gentle, neutral</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valeriano</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Energetic, excited, adventurous</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bold, expressive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pierrot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bouncy, playful, comedic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Light, fun</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rosita</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear, articulate, curious</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Precise, educational</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Consequences</strong>:</p>
</div>
<div class="paragraph">
<p><strong>Positive:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Whisper&#8217;s excellent multilingual support (IT, FR, EN)</p>
</li>
<li>
<p>ElevenLabs produces natural, expressive voices</p>
</li>
<li>
<p>Custom voice cloning creates unique character identities</p>
</li>
<li>
<p>Both services have good latency characteristics</p>
</li>
<li>
<p>Strong documentation and SDK support</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Negative:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>ElevenLabs cost scales with usage</p>
</li>
<li>
<p>Dependency on external services</p>
</li>
<li>
<p>Voice training requires quality samples</p>
</li>
<li>
<p>Latency varies by network conditions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Mitigation:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Text fallback when voice fails</p>
</li>
<li>
<p>Audio streaming (not waiting for complete audio)</p>
</li>
<li>
<p>Pre-loaded voice models on ElevenLabs</p>
</li>
<li>
<p>Cost monitoring and optimization</p>
</li>
<li>
<p>Native device STT as fallback option</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quality_assurance_testing_strategy">5. Quality Assurance Testing Strategy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_testing_scope">5.1. Testing Scope</h3>
<div class="paragraph">
<p>The testing team will execute validation of changes across all Calimero platform components, with special emphasis on child safety, COPPA compliance, and AI interaction quality.</p>
</div>
<div class="sect3">
<h4 id="_scope_of_testing">5.1.1. Scope of Testing</h4>
<div class="sect4">
<h5 id="_functional_testing">Functional Testing</h5>
<div class="ulist">
<ul>
<li>
<p>AI Companion Interactions (text and voice)</p>
</li>
<li>
<p>Safety Filter Effectiveness</p>
</li>
<li>
<p>Parental Control Features</p>
</li>
<li>
<p>E-commerce Functionality (adult site)</p>
</li>
<li>
<p>Content Management Integration</p>
</li>
<li>
<p>Multi-language Support (IT, FR, EN)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_non_functional_testing">Non-Functional Testing</h5>
<div class="ulist">
<ul>
<li>
<p>Performance and Load Testing</p>
</li>
<li>
<p>Security Testing</p>
</li>
<li>
<p>Accessibility Testing</p>
</li>
<li>
<p>COPPA Compliance Verification</p>
</li>
<li>
<p>Cross-browser/Device Compatibility</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_test_platforms">5.1.2. Test Platforms</h4>
<div class="sect4">
<h5 id="_web_platforms">Web Platforms</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Kids Website</strong> (kids.calimero.com)</p>
<div class="ulist">
<ul>
<li>
<p>Chrome, Firefox, Safari, Edge (latest 2 versions)</p>
</li>
<li>
<p>Desktop and tablet viewports</p>
</li>
<li>
<p>Touch and mouse interactions</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Adult Website</strong> (calimero.com)</p>
<div class="ulist">
<ul>
<li>
<p>Chrome, Firefox, Safari, Edge (latest 2 versions)</p>
</li>
<li>
<p>Desktop, tablet, and mobile viewports</p>
</li>
<li>
<p>E-commerce checkout flows</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_mobile_platforms">Mobile Platforms</h5>
<div class="ulist">
<ul>
<li>
<p><strong>iOS</strong>: iPhone 12+, iPad (iOS 15+)</p>
</li>
<li>
<p><strong>Android</strong>: Samsung Galaxy S21+, Pixel 6+ (Android 10+)</p>
</li>
<li>
<p><strong>Tablets</strong>: iPad Air, Samsung Galaxy Tab</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_testing_tools">5.1.3. Testing Tools</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 42.8571%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top">Tool</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TestRail / Azure DevOps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test case management, execution tracking</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web Automation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Playwright + TypeScript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E testing for web platforms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile Automation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Detox (React Native)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E testing for mobile app</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postman / Newman</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backend API validation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">k6 + Grafana</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load testing and performance monitoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP ZAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security vulnerability scanning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accessibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">axe DevTools</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WCAG compliance verification</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Visual Testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Percy / Chromatic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Visual regression detection</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_test_types">5.1.4. Test Types</h4>
<div class="sect4">
<h5 id="_end_to_end_testing">End-to-End Testing</h5>
<div class="paragraph">
<p>Testing complete user journeys across the platform:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Child plays game → chats with AI → watches video</p>
</li>
<li>
<p>Parent sets controls → child uses platform → parent reviews activity</p>
</li>
<li>
<p>Adult browses → adds to cart → completes checkout</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_functional_testing_2">Functional Testing</h5>
<div class="paragraph">
<p>Validation of all features against requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AI character conversations (all 5 characters)</p>
</li>
<li>
<p>Game functionality and scoring</p>
</li>
<li>
<p>Video playback and controls</p>
</li>
<li>
<p>Parental dashboard operations</p>
</li>
<li>
<p>E-commerce transactions</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_safety_testing_critical">Safety Testing (Critical)</h5>
<div class="paragraph">
<p>Dedicated testing of child safety features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Input filter effectiveness</p>
</li>
<li>
<p>Output filter effectiveness</p>
</li>
<li>
<p>Topic boundary enforcement</p>
</li>
<li>
<p>Emergency detection accuracy</p>
</li>
<li>
<p>PII prevention</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_non_functional_testing_2">Non-Functional Testing</h5>
<div class="sect5">
<h6 id="_performance_testing">Performance Testing</h6>
<div class="ulist">
<ul>
<li>
<p><strong>Load Testing</strong>: Up to 2000 concurrent users</p>
</li>
<li>
<p><strong>Response Time</strong>: &lt;1s for 95% of requests</p>
</li>
<li>
<p><strong>Voice Latency</strong>: &lt;2s end-to-end</p>
</li>
<li>
<p><strong>Page Load</strong>: &lt;2.5s LCP</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_security_testing">Security Testing</h6>
<div class="ulist">
<ul>
<li>
<p>OWASP Top 10 vulnerability scanning</p>
</li>
<li>
<p>API security testing</p>
</li>
<li>
<p>Authentication/authorization testing</p>
</li>
<li>
<p>Data leakage prevention</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_supported_configurations">5.1.5. Supported Configurations</h4>
<div class="sect4">
<h5 id="_mobile_devices_primary">Mobile Devices (Primary)</h5>
<div class="ulist">
<ul>
<li>
<p>iOS 15+ (iPhone, iPad)</p>
</li>
<li>
<p>Android 10+ (phones and tablets)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_browsers_primary">Browsers (Primary)</h5>
<div class="ulist">
<ul>
<li>
<p>Chrome 100+</p>
</li>
<li>
<p>Safari 15+</p>
</li>
<li>
<p>Firefox 100+</p>
</li>
<li>
<p>Edge 100+</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_network_conditions">Network Conditions</h5>
<div class="ulist">
<ul>
<li>
<p>4G / LTE</p>
</li>
<li>
<p>WiFi (stable)</p>
</li>
<li>
<p>3G (degraded - graceful fallback)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_levels">5.2. Testing Levels</h3>
<div class="sect3">
<h4 id="_overview_9">5.2.1. Overview</h4>
<div class="paragraph">
<p>The Calimero Platform implements a comprehensive multi-level testing strategy following the testing pyramid approach, with additional emphasis on AI safety validation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_test_pyramid">5.2.2. Test Pyramid</h4>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-b312ce55a7f843d5e5499a8394085543.png" alt="Diagram" width="368" height="252">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_level_1_unit_tests">5.2.3. Level 1: Unit Tests</h4>
<div class="sect4">
<h5 id="_coverage_targets">Coverage Targets</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Module</th>
<th class="tableblock halign-left valign-top">Target Coverage</th>
<th class="tableblock halign-left valign-top">Focus Areas</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI Safety Filters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">95%+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input validation, output filtering, topic boundaries</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Logic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">85%+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session management, parental controls</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UI Components</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80%+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">React/React Native components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utilities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">90%+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shared helper functions</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_technologies">Technologies</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Backend</strong>: Jest + Supertest (NestJS)</p>
</li>
<li>
<p><strong>Frontend Web</strong>: Jest + React Testing Library</p>
</li>
<li>
<p><strong>Mobile</strong>: Jest + React Native Testing Library</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_level_2_integration_tests">5.2.4. Level 2: Integration Tests</h4>
<div class="sect4">
<h5 id="_api_integration">API Integration</h5>
<div class="ulist">
<ul>
<li>
<p>Backend service communication</p>
</li>
<li>
<p>External API mocking (LLM, TTS, STT)</p>
</li>
<li>
<p>Database/Redis operations</p>
</li>
<li>
<p>CMS integration</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_component_integration">Component Integration</h5>
<div class="ulist">
<ul>
<li>
<p>Multi-component workflows</p>
</li>
<li>
<p>State management flows</p>
</li>
<li>
<p>Navigation flows</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_technologies_2">Technologies</h5>
<div class="ulist">
<ul>
<li>
<p>Backend: Jest + Supertest with test containers</p>
</li>
<li>
<p>Frontend: Playwright component testing</p>
</li>
<li>
<p>Mobile: Detox integration tests</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_level_3_end_to_end_tests">5.2.5. Level 3: End-to-End Tests</h4>
<div class="sect4">
<h5 id="_critical_user_journeys">Critical User Journeys</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Journey</th>
<th class="tableblock halign-left valign-top">Platform</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E-001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child opens app → selects character → has voice conversation → session ends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile App</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E-002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child visits website → plays game → chats with AI → parent sets time limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kids Website</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E-003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parent sets parental controls → child uses platform → time limit enforced</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cross-platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E-004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adult browses → creates account → adds to wishlist → checkout → order confirmation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adult Website</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E-005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voice AI conversation with emergency detection trigger → appropriate response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile App</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_technologies_3">Technologies</h5>
<div class="ulist">
<ul>
<li>
<p>Web: Playwright</p>
</li>
<li>
<p>Mobile: Detox</p>
</li>
<li>
<p>API: Postman/Newman</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_level_4_safety_testing_special_focus">5.2.6. Level 4: Safety Testing (Special Focus)</h4>
<div class="paragraph">
<p>Due to the child-focused nature of the platform, safety testing receives dedicated attention:</p>
</div>
<div class="sect4">
<h5 id="_input_safety_tests">Input Safety Tests</h5>
<div class="ulist">
<ul>
<li>
<p>Attempt to inject PII</p>
</li>
<li>
<p>Profanity and inappropriate language</p>
</li>
<li>
<p>Harmful content injection</p>
</li>
<li>
<p>External link injection</p>
</li>
<li>
<p>Manipulation attempts</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_output_safety_tests">Output Safety Tests</h5>
<div class="ulist">
<ul>
<li>
<p>Verify AI never asks for PII</p>
</li>
<li>
<p>Verify topic boundary enforcement</p>
</li>
<li>
<p>Verify emergency detection works</p>
</li>
<li>
<p>Verify responses are age-appropriate</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_coppa_compliance_tests">COPPA Compliance Tests</h5>
<div class="ulist">
<ul>
<li>
<p>No cookies set on kids platform</p>
</li>
<li>
<p>No tracking pixels loaded</p>
</li>
<li>
<p>No forms collecting PII</p>
</li>
<li>
<p>No persistent storage of user data</p>
</li>
<li>
<p>Parental controls require PIN</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_level_5_performance_tests">5.2.7. Level 5: Performance Tests</h4>
<div class="sect4">
<h5 id="_load_testing_scenarios">Load Testing Scenarios</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Scenario</th>
<th class="tableblock halign-left valign-top">Virtual Users</th>
<th class="tableblock halign-left valign-top">Duration</th>
<th class="tableblock halign-left valign-top">Success Criteria</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Normal Load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 concurrent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">p95 &lt; 500ms, 0% errors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Peak Load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2000 concurrent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">p95 &lt; 1000ms, &lt;0.1% errors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stress Test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000 concurrent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graceful degradation, no crashes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Endurance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 concurrent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 hours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No memory leaks, stable performance</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_voice_ai_latency_testing">Voice AI Latency Testing</h5>
<div class="ulist">
<ul>
<li>
<p>STT processing time</p>
</li>
<li>
<p>LLM inference time</p>
</li>
<li>
<p>TTS generation time</p>
</li>
<li>
<p>End-to-end voice round trip</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_test_environment_matrix">5.2.8. Test Environment Matrix</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Level</th>
<th class="tableblock halign-left valign-top">Environment</th>
<th class="tableblock halign-left valign-top">Data</th>
<th class="tableblock halign-left valign-top">Execution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local / CI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mocked</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Every commit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CI / Staging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test fixtures</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Every PR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Staging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seeded data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Daily / Pre-release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Staging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adversarial inputs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Weekly / Pre-release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance env</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Production-like</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Weekly / Pre-release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_testing_strategy">5.3. Testing Strategy</h3>
<div class="sect3">
<h4 id="_test_strategy_overview">5.3.1. Test Strategy Overview</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Section</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. Test Strategy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1 Risk-Based Testing Approach<br>
1.2 Automation vs Manual Balance<br>
1.3 Sprint Testing Integration<br>
1.4 COPPA Compliance Testing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2. Test Development</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1 Test Case Design<br>
2.2 Automation Framework<br>
2.3 Test Data Management<br>
2.4 Safety Test Scenarios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3. Test Execution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1 Continuous Testing Pipeline<br>
3.2 Defect Tracking<br>
3.3 Test Reporting<br>
3.4 Metrics Dashboard</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4. Defect Management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.1 Severity Classification<br>
4.2 Triage Process<br>
4.3 Resolution SLAs<br>
4.4 Regression Prevention</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5. Release Criteria</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.1 Quality Gates<br>
5.2 COPPA Audit Checklist<br>
5.3 Go/No-Go Decision Matrix<br>
5.4 Rollback Procedures</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_1_test_strategy_details">5.3.2. 1. Test Strategy Details</h4>
<div class="sect4">
<h5 id="_1_1_risk_based_testing_approach">1.1 Risk-Based Testing Approach</h5>
<div class="paragraph">
<p>Test effort is prioritized based on risk assessment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Risk Area</th>
<th class="tableblock halign-left valign-top">Priority</th>
<th class="tableblock halign-left valign-top">Test Depth</th>
<th class="tableblock halign-left valign-top">Automation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI Safety (Kids)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extensive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80%+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA Compliance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comprehensive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">70%+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voice AI Functionality</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thorough</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60%+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E-commerce Checkout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thorough</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">70%+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parental Controls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thorough</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60%+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Games &amp; Activities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40%+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Display</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50%+</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_1_2_automation_strategy">1.2 Automation Strategy</h5>
<div class="paragraph">
<p><strong>Target: 70% automation coverage overall</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unit tests: 100% automated</p>
</li>
<li>
<p>Integration tests: 90% automated</p>
</li>
<li>
<p>E2E critical paths: 80% automated</p>
</li>
<li>
<p>Exploratory testing: Manual</p>
</li>
<li>
<p>Accessibility: Semi-automated</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_1_3_sprint_testing_integration">1.3 Sprint Testing Integration</h5>
<div class="paragraph">
<p>Each 1-week sprint includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Day 1-2: Test planning, test case creation</p>
</li>
<li>
<p>Day 3-5: Test execution parallel to development</p>
</li>
<li>
<p>Day 5: Regression suite execution</p>
</li>
<li>
<p>Daily: Automation updates</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_1_4_coppa_compliance_testing">1.4 COPPA Compliance Testing</h5>
<div class="paragraph">
<p>Dedicated compliance testing checklist:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Check</th>
<th class="tableblock halign-left valign-top">Verification Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA-01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No cookies set on kids.calimero.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browser DevTools audit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA-02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No localStorage usage on kids platform</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automated script</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA-03</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No PII collection forms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual + automated review</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No third-party tracking pixels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network traffic analysis</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA-05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI never requests PII</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adversarial testing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chat history not persisted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database + Redis audit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parental controls require PIN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Functional testing</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_2_test_development">5.3.3. 2. Test Development</h4>
<div class="sect4">
<h5 id="_2_1_test_case_design">2.1 Test Case Design</h5>
<div class="paragraph">
<p>Test cases follow BDD (Behavior-Driven Development) format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-gherkin" data-lang="gherkin">Feature: AI Character Conversation
  As a child user
  I want to talk to Calimero
  So that I can have fun and learn

  Scenario: Basic conversation
    Given I am on the kids website
    And I have selected Calimero as my companion
    When I type "Hello Calimero!"
    Then I should receive a friendly response from Calimero
    And the response should not contain inappropriate content
    And the response should not ask for personal information</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_2_2_test_data_management">2.2 Test Data Management</h5>
<div class="ulist">
<ul>
<li>
<p>Test fixtures version-controlled</p>
</li>
<li>
<p>No production data in testing</p>
</li>
<li>
<p>Anonymized data sets for performance testing</p>
</li>
<li>
<p>Adversarial inputs library for safety testing</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_3_test_execution">5.3.4. 3. Test Execution</h4>
<div class="sect4">
<h5 id="_3_1_cicd_integration">3.1 CI/CD Integration</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Commit → Unit Tests → Integration Tests → Build → Deploy Staging → E2E Tests → Deploy Prod</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quality gates at each stage:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unit tests: Must pass 100%</p>
</li>
<li>
<p>Integration tests: Must pass 100%</p>
</li>
<li>
<p>E2E critical paths: Must pass 100%</p>
</li>
<li>
<p>Performance: Must meet SLAs</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_3_2_test_metrics">3.2 Test Metrics</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 42.8571%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric</th>
<th class="tableblock halign-left valign-top">Formula</th>
<th class="tableblock halign-left valign-top">Target</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Coverage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lines covered / Total lines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;80%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Pass Rate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passed tests / Total tests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;98%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defect Escape Rate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prod defects / Total defects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;5%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automation Rate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automated tests / Total tests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;70%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTTR (Mean Time to Repair)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average defect fix time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;4 hours (Critical)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_4_defect_management">5.3.5. 4. Defect Management</h4>
<div class="sect4">
<h5 id="_4_1_severity_classification">4.1 Severity Classification</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Definition</th>
<th class="tableblock halign-left valign-top">SLA</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety issue, platform down, data breach</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fix within 4 hours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Major feature broken, no workaround</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fix within 24 hours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature issue with workaround</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fix within sprint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor issue, cosmetic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fix in backlog</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_4_2_safety_related_defects">4.2 Safety-Related Defects</h5>
<div class="paragraph">
<p>Any safety-related defect is automatically Critical:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AI generating inappropriate content</p>
</li>
<li>
<p>PII being collected or logged</p>
</li>
<li>
<p>Safety filters bypassed</p>
</li>
<li>
<p>Emergency detection failure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_5_release_criteria">5.3.6. 5. Release Criteria</h4>
<div class="sect4">
<h5 id="_5_1_mvp_release_checklist">5.1 MVP Release Checklist</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top">Criteria</th>
<th class="tableblock halign-left valign-top">Status</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Functional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All P1 features working</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100% safety tests passing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance audit passed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SLAs met under load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No critical vulnerabilities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accessibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WCAG 2.1 AA compliant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regression</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100% regression suite passing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_5_2_gono_go_decision">5.2 Go/No-Go Decision</h5>
<div class="paragraph">
<p><strong>GO criteria:</strong>
* All Critical/High defects resolved
* COPPA audit passed
* Performance SLAs met
* Security scan clean
* Stakeholder sign-off obtained</p>
</div>
<div class="paragraph">
<p><strong>NO-GO triggers:</strong>
* Any unresolved safety defect
* COPPA compliance failure
* Critical security vulnerability
* Performance below thresholds</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_risk_technical_debt">6. Risk &amp; Technical Debt</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_risks">6.1. Risks</h3>
<div class="paragraph">
<p>The following risks represent potential future uncertainties that may impact the system if not addressed:</p>
</div>
<div class="sect3">
<h4 id="_technical_risks">6.1.1. Technical Risks</h4>
<table id="technical-risks" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R1"></a>R1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI Safety Filter Bypass - LLM generates inappropriate content that passes through safety filters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-layer filtering (input + output), adversarial testing, continuous monitoring, human review of flagged content, immediate hotfix capability</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R2"></a>R2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM Provider Instability - Primary AI provider experiences outages or performance degradation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider abstraction layer enabling hot-swap to backup provider (Together AI ↔ Claude), health monitoring, automatic failover</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R3"></a>R3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voice AI Latency - End-to-end voice interactions exceed acceptable latency thresholds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Streaming responses, text fallback option, performance optimization, edge processing investigation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R4"></a>R4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Third-party API Changes - ElevenLabs, Whisper, or Shopify APIs change or deprecate features</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adapter pattern for all integrations, version pinning, monitoring API changelogs, contingency providers identified</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R5"></a>R5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile App Store Rejection - App rejected due to COPPA concerns or content policy violations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-submission legal review, Apple/Google guidelines compliance checklist, soft launch via TestFlight/Internal Testing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R6"></a>R6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance Under Load - System degrades during peak usage (after-school hours)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load testing at 2x expected peak, auto-scaling configuration, CDN optimization, graceful degradation strategy</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_business_risks">6.1.2. Business Risks</h4>
<table id="business-risks" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R7"></a>R7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeline Overrun - 8-week MVP timeline not achievable due to scope or technical challenges</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strict MVP scope enforcement, daily standups, early risk identification, scope trade-off decisions, feature prioritization matrix</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R8"></a>R8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Design Dependencies - UX/UI designs not finalized before development begins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Design-first sprint 0, designs must be locked before feature development, parallel design/dev where possible</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R9"></a>R9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voice Training Quality - Custom character voices don&#8217;t meet quality expectations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Early voice training initiation, multiple sample recordings, iterative refinement, professional voice actors backup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R10"></a>R10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brand/IP Constraints - Calimero IP holder requires changes that impact architecture</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Early stakeholder alignment, regular brand review checkpoints, flexible content management</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_compliance_risks">6.1.3. Compliance Risks</h4>
<table id="compliance-risks" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R11"></a>R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPPA Non-Compliance - Platform found to violate COPPA regulations post-launch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zero data collection architecture, legal review, COPPA audit before launch, ongoing compliance monitoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R12"></a>R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Privacy Breach - AI conversation data inadvertently logged or exposed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ephemeral storage only, log audit (no PII), encryption, security testing, incident response plan</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R13"></a>R13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GDPR Compliance (Adult Site) - User data handling violates GDPR requirements</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Privacy by design, data processing agreements with vendors, user consent mechanisms, data export/deletion capabilities</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_safety_risks">6.1.4. Safety Risks</h4>
<table id="safety-risks" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R14"></a>R14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child Safety Incident - Child is exposed to harmful content or interaction through the platform</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-layer safety architecture, emergency detection, topic boundaries, continuous monitoring, incident response protocol, legal team on standby</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="R15"></a>R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emergency Detection Failure - System fails to detect and respond appropriately to emergency situations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regular testing of detection patterns, conservative trigger thresholds, fallback to safe responses, human review process</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_risk_monitoring">6.1.5. Risk Monitoring</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 42.8571%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Risk Category</th>
<th class="tableblock halign-left valign-top">Monitoring Approach</th>
<th class="tableblock halign-left valign-top">Review Frequency</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Technical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance dashboards, error tracking, provider status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Daily</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety filter metrics, incident reports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Daily</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compliance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Audit checklist, legal review</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Weekly</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint burndown, stakeholder feedback</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Weekly</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_technical_debt">6.2. Technical Debt</h3>
<div class="paragraph">
<p>The following technical debt items represent known deficiencies in the MVP implementation. They are acknowledged and planned for future resolution:</p>
</div>
<div class="sect3">
<h4 id="_mvp_technical_debt">6.2.1. MVP Technical Debt</h4>
<table id="technical-debt" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Remediation Plan</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD1"></a>TD1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limited automated test coverage for AI safety filters due to time constraints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Post-MVP sprint dedicated to increasing safety filter test coverage to 95%+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD2"></a>TD2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No persistent user preferences or personalization (kids platform)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By design for COPPA compliance, but may add opt-in parent-controlled preferences in future</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD3"></a>TD3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single backend instance (no horizontal scaling configured)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implement Kubernetes deployment with auto-scaling post-MVP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD4"></a>TD4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voice AI only supports 3 languages (IT, FR, EN) at launch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add Japanese, German, Spanish in Phase 2 (per roadmap)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD5"></a>TD5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic parental activity reports (aggregate only)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enhanced reporting dashboard with more granular (but privacy-safe) insights</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD6"></a>TD6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E-commerce limited to basic checkout flow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced features (subscriptions, gift cards, loyalty) deferred to post-MVP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD7"></a>TD7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimal documentation for internal APIs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generate OpenAPI specs and documentation post-MVP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD8"></a>TD8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limited visual regression testing coverage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implement Percy/Chromatic for comprehensive visual testing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="TD9"></a>TD9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual deployment for mobile app updates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implement CodePush for OTA updates (non-native changes)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_architecture_debt">6.2.2. Architecture Debt</h4>
<table id="architecture-debt" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Severity</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Remediation Plan</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="AD1"></a>AD1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monolithic NestJS backend (all modules in single deployment)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluate microservices split if scaling becomes an issue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="AD2"></a>AD2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No message queue for async operations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add RabbitMQ/Redis Streams for better decoupling and reliability</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="AD3"></a>AD3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CMS content not fully optimized for global CDN distribution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implement edge caching strategy with ISR optimization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="AD4"></a>AD4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No feature flag system for gradual rollouts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implement LaunchDarkly or similar for controlled feature releases</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_deferred_features_not_technical_debt">6.2.3. Deferred Features (Not Technical Debt)</h4>
<div class="paragraph">
<p>The following items are explicitly out of scope for MVP and not considered technical debt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Self-hosted AI models</p>
</li>
<li>
<p>Advanced analytics dashboard</p>
</li>
<li>
<p>Push notifications</p>
</li>
<li>
<p>Additional languages beyond IT/FR/EN</p>
</li>
<li>
<p>Persistent user profiles (kids)</p>
</li>
<li>
<p>AI personalization based on history</p>
</li>
<li>
<p>Offline mode improvements</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_debt_payment_schedule">6.2.4. Debt Payment Schedule</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Priority</th>
<th class="tableblock halign-left valign-top">Items</th>
<th class="tableblock halign-left valign-top">Target Timeline</th>
<th class="tableblock halign-left valign-top">Effort Estimate</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1 - Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD1 (Safety test coverage)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MVP + 2 weeks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sprint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2 - High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD3 (Scaling), AD1 (Microservices evaluation)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MVP + 1 month</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 sprints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P3 - Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD4-TD6, AD2-AD3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MVP + 2 months</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 sprints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P4 - Low</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD7-TD9, AD4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MVP + 3 months</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 sprints</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_debt_tracking">6.2.5. Debt Tracking</h4>
<div class="ulist">
<ul>
<li>
<p>Technical debt items are tracked in the project backlog with <code>tech-debt</code> label</p>
</li>
<li>
<p>Reviewed in bi-weekly architecture review meetings</p>
</li>
<li>
<p>Prioritized against feature work based on impact and risk</p>
</li>
<li>
<p>New debt must be documented before acceptance</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features_traceability_matrix_rtm">7. Features Traceability Matrix (RTM)</h2>
<div class="sectionbody">
<table id="ftm" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6669%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Feature</th>
<th class="tableblock halign-left valign-top">Requirements</th>
<th class="tableblock halign-left valign-top">Quality Attributes</th>
<th class="tableblock halign-left valign-top">Arch. Decisions</th>
<th class="tableblock halign-left valign-top">Risks/Tech Debt</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>AI Text Chat (Kids Website)</strong>: Children can have text-based conversations with AI character companions on kids.calimero.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE1">R1 COPPA Kids Website</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#RE4">R4 AI Routing</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#RE6">R6 5 AI Characters</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q1">Q1 Child Safety</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q2">Q2 COPPA Compliance</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q3">Q3 Performance</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-001-my-project.adoc">ADR-001 LLM Provider</a><br>
<a href="#./04_architecture_decisions/adr-003-centralized-ai-backend.adoc">ADR-003 Centralized Backend</a><br>
<a href="#./04_architecture_decisions/adr-004-ephemeral-storage.adoc">ADR-004 Ephemeral Storage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/01_risks.html#R1">R1 Safety Filter Bypass</a><br>
<a href="./06_risks_and_tech_debt/01_risks.html#R14">R14 Child Safety Incident</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Voice AI Chat (Mobile App)</strong>: Children can have voice conversations with AI character companions featuring Rive animations and lip-sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE3">R3 Kids Mobile App</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#RE9">R9 Rive Animations</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#TR4">TR4 STT</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#TR5">TR5 TTS</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q1">Q1 Child Safety</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q3">Q3 Performance</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q8">Q8 Reliability</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-005-react-native-mobile.adoc">ADR-005 React Native</a><br>
<a href="#./04_architecture_decisions/adr-006-voice-ai-stack.adoc">ADR-006 Voice AI Stack</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/01_risks.html#R3">R3 Voice Latency</a><br>
<a href="./06_risks_and_tech_debt/01_risks.html#R5">R5 App Store Rejection</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Parental Controls</strong>: Parents can manage time limits, feature toggles, and view activity summaries via PIN-protected dashboard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE7">R7 Parental Controls</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q2">Q2 COPPA Compliance</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q10">Q10 Privacy</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-004-ephemeral-storage.adoc">ADR-004 Ephemeral Storage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/02_technical_debts.html#TD5">TD5 Basic Reporting</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>AI Safety Layer</strong>: Multi-layer content moderation with input/output filtering, topic boundaries, and emergency detection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE4">R4 AI Routing</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#RE8">R8 Ephemeral Sessions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q1">Q1 Child Safety</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q4">Q4 Security</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-003-centralized-ai-backend.adoc">ADR-003 Centralized Backend</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/01_risks.html#R1">R1 Safety Filter Bypass</a><br>
<a href="./06_risks_and_tech_debt/01_risks.html#R15">R15 Emergency Detection Failure</a><br>
<a href="./06_risks_and_tech_debt/02_technical_debts.html#TD1">TD1 Limited Safety Tests</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Kids Website Content</strong>: Games, videos, character profiles, and activities on kids.calimero.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE1">R1 COPPA Kids Website</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#RE5">R5 Multi-language</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#TR9">TR9 Headless CMS</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q2">Q2 COPPA Compliance</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q6">Q6 Localization</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q7">Q7 Accessibility</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-002-subdomain-architecture.adoc">ADR-002 Subdomain Architecture</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/01_risks.html#R10">R10 Brand Constraints</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Adult E-commerce</strong>: Product catalog, shopping cart, checkout, and order management on calimero.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE2">R2 Adult Website</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#IR1">IR1 E-commerce Integration</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q3">Q3 Performance</a><br>
<a href="./01_introduction_and_goals/03_quality_goals.html#Q4">Q4 Security</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-002-subdomain-architecture.adoc">ADR-002 Subdomain Architecture</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/02_technical_debts.html#TD6">TD6 Basic Checkout</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Adult AI Features</strong>: AI character generator, meme maker, and creative tools on calimero.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE2">R2 Adult Website</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#RE10">R10 AI Generator</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q3">Q3 Performance</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-001-my-project.adoc">ADR-001 LLM Provider</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/01_risks.html#R2">R2 LLM Instability</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Multi-language Support</strong>: Content and UI in Italian, French, and English across all platforms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE5">R5 Multi-language</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q6">Q6 Localization</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-006-voice-ai-stack.adoc">ADR-006 Voice AI Stack</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/02_technical_debts.html#TD4">TD4 Limited Languages</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>5 AI Character Companions</strong>: Calimero, Priscilla, Valeriano, Pierrot, and Rosita with unique personalities and voices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE6">R6 5 AI Characters</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q1">Q1 Child Safety</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-006-voice-ai-stack.adoc">ADR-006 Voice AI Stack</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/01_risks.html#R9">R9 Voice Training Quality</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>User Authentication (Adult Site)</strong>: Account creation, login, and profile management for adult users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/02_requirements_overview.html#RE2">R2 Adult Website</a><br>
<a href="./01_introduction_and_goals/02_requirements_overview.html#IR2">IR2 NextAuth Integration</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./01_introduction_and_goals/03_quality_goals.html#Q4">Q4 Security</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#./04_architecture_decisions/adr-002-subdomain-architecture.adoc">ADR-002 Subdomain Architecture</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="./06_risks_and_tech_debt/01_risks.html#R13">R13 GDPR Compliance</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_feature_priority_matrix">7.1. Feature Priority Matrix</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8571%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Priority</th>
<th class="tableblock halign-left valign-top">Feature</th>
<th class="tableblock halign-left valign-top">Rationale</th>
<th class="tableblock halign-left valign-top">Sprint</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P0 - Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F4 AI Safety Layer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foundation for all AI features, must be in place first</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 1-2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P0 - Critical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F1 AI Text Chat (Kids)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core kids engagement feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 2-3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1 - High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F2 Voice AI Chat (Mobile)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Premium differentiating feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 3-5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1 - High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F3 Parental Controls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required for COPPA compliance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 4-5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1 - High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F5 Kids Website Content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core content for kids engagement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 2-4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2 - Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F6 Adult E-commerce</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revenue generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 3-5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2 - Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F9 5 AI Characters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character personality differentiation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 2-4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2 - Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F8 Multi-language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Market expansion requirement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 5-6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P3 - Lower</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F7 Adult AI Features</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nice-to-have for adult engagement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 5-6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P3 - Lower</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F10 User Authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required for e-commerce</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sprint 3</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_traceability_summary">7.2. Traceability Summary</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Total Features</strong>: 10</p>
</li>
<li>
<p><strong>Features with Safety Requirements</strong>: 4 (F1, F2, F4, F9)</p>
</li>
<li>
<p><strong>Features with COPPA Requirements</strong>: 4 (F1, F3, F4, F5)</p>
</li>
<li>
<p><strong>Features with Performance Requirements</strong>: 5 (F1, F2, F5, F6, F7)</p>
</li>
<li>
<p><strong>Features with Identified Risks</strong>: 9 (all except F10)</p>
</li>
<li>
<p><strong>Features with Technical Debt</strong>: 5 (F2, F3, F4, F6, F8)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2025-12-17 11:27:20 UTC
</div>
</div>
</body>
</html>