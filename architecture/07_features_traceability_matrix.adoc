= Features Traceability Matrix (RTM)

////
[NOTE]
====
This matrix traces Calimero Platform features to their requirements, quality attributes, architecture decisions, and associated risks. It provides a comprehensive view of how each feature relates to other architectural elements.
====
////

[cols="1,3,2,2,2,2", id=ftm, options="header"]
|===
|ID |Feature |Requirements |Quality Attributes |Arch. Decisions |Risks/Tech Debt

|F1
|**AI Text Chat (Kids Website)**: Children can have text-based conversations with AI character companions on kids.calimero.com
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE1, R1 COPPA Kids Website>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#RE4, R4 AI Routing>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#RE6, R6 5 AI Characters>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q1, Q1 Child Safety>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q2, Q2 COPPA Compliance>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q3, Q3 Performance>>
|<<./04_architecture_decisions/adr-001-my-project.adoc, ADR-001 LLM Provider>> +
<<./04_architecture_decisions/adr-003-centralized-ai-backend.adoc, ADR-003 Centralized Backend>> +
<<./04_architecture_decisions/adr-004-ephemeral-storage.adoc, ADR-004 Ephemeral Storage>>
|<<./06_risks_and_tech_debt/01_risks.adoc#R1, R1 Safety Filter Bypass>> +
<<./06_risks_and_tech_debt/01_risks.adoc#R14, R14 Child Safety Incident>>

|F2
|**Voice AI Chat (Mobile App)**: Children can have voice conversations with AI character companions featuring Rive animations and lip-sync
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE3, R3 Kids Mobile App>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#RE9, R9 Rive Animations>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#TR4, TR4 STT>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#TR5, TR5 TTS>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q1, Q1 Child Safety>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q3, Q3 Performance>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q8, Q8 Reliability>>
|<<./04_architecture_decisions/adr-005-react-native-mobile.adoc, ADR-005 React Native>> +
<<./04_architecture_decisions/adr-006-voice-ai-stack.adoc, ADR-006 Voice AI Stack>>
|<<./06_risks_and_tech_debt/01_risks.adoc#R3, R3 Voice Latency>> +
<<./06_risks_and_tech_debt/01_risks.adoc#R5, R5 App Store Rejection>>

|F3
|**Parental Controls**: Parents can manage time limits, feature toggles, and view activity summaries via PIN-protected dashboard
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE7, R7 Parental Controls>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q2, Q2 COPPA Compliance>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q10, Q10 Privacy>>
|<<./04_architecture_decisions/adr-004-ephemeral-storage.adoc, ADR-004 Ephemeral Storage>>
|<<./06_risks_and_tech_debt/02_technical_debts.adoc#TD5, TD5 Basic Reporting>>

|F4
|**AI Safety Layer**: Multi-layer content moderation with input/output filtering, topic boundaries, and emergency detection
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE4, R4 AI Routing>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#RE8, R8 Ephemeral Sessions>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q1, Q1 Child Safety>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q4, Q4 Security>>
|<<./04_architecture_decisions/adr-003-centralized-ai-backend.adoc, ADR-003 Centralized Backend>>
|<<./06_risks_and_tech_debt/01_risks.adoc#R1, R1 Safety Filter Bypass>> +
<<./06_risks_and_tech_debt/01_risks.adoc#R15, R15 Emergency Detection Failure>> +
<<./06_risks_and_tech_debt/02_technical_debts.adoc#TD1, TD1 Limited Safety Tests>>

|F5
|**Kids Website Content**: Games, videos, character profiles, and activities on kids.calimero.com
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE1, R1 COPPA Kids Website>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#RE5, R5 Multi-language>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#TR9, TR9 Headless CMS>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q2, Q2 COPPA Compliance>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q6, Q6 Localization>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q7, Q7 Accessibility>>
|<<./04_architecture_decisions/adr-002-subdomain-architecture.adoc, ADR-002 Subdomain Architecture>>
|<<./06_risks_and_tech_debt/01_risks.adoc#R10, R10 Brand Constraints>>

|F6
|**Adult E-commerce**: Product catalog, shopping cart, checkout, and order management on calimero.com
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE2, R2 Adult Website>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#IR1, IR1 E-commerce Integration>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q3, Q3 Performance>> +
<<./01_introduction_and_goals/03_quality_goals.adoc#Q4, Q4 Security>>
|<<./04_architecture_decisions/adr-002-subdomain-architecture.adoc, ADR-002 Subdomain Architecture>>
|<<./06_risks_and_tech_debt/02_technical_debts.adoc#TD6, TD6 Basic Checkout>>

|F7
|**Adult AI Features**: AI character generator, meme maker, and creative tools on calimero.com
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE2, R2 Adult Website>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#RE10, R10 AI Generator>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q3, Q3 Performance>>
|<<./04_architecture_decisions/adr-001-my-project.adoc, ADR-001 LLM Provider>>
|<<./06_risks_and_tech_debt/01_risks.adoc#R2, R2 LLM Instability>>

|F8
|**Multi-language Support**: Content and UI in Italian, French, and English across all platforms
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE5, R5 Multi-language>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q6, Q6 Localization>>
|<<./04_architecture_decisions/adr-006-voice-ai-stack.adoc, ADR-006 Voice AI Stack>>
|<<./06_risks_and_tech_debt/02_technical_debts.adoc#TD4, TD4 Limited Languages>>

|F9
|**5 AI Character Companions**: Calimero, Priscilla, Valeriano, Pierrot, and Rosita with unique personalities and voices
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE6, R6 5 AI Characters>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q1, Q1 Child Safety>>
|<<./04_architecture_decisions/adr-006-voice-ai-stack.adoc, ADR-006 Voice AI Stack>>
|<<./06_risks_and_tech_debt/01_risks.adoc#R9, R9 Voice Training Quality>>

|F10
|**User Authentication (Adult Site)**: Account creation, login, and profile management for adult users
|<<./01_introduction_and_goals/02_requirements_overview.adoc#RE2, R2 Adult Website>> +
<<./01_introduction_and_goals/02_requirements_overview.adoc#IR2, IR2 NextAuth Integration>>
|<<./01_introduction_and_goals/03_quality_goals.adoc#Q4, Q4 Security>>
|<<./04_architecture_decisions/adr-002-subdomain-architecture.adoc, ADR-002 Subdomain Architecture>>
|<<./06_risks_and_tech_debt/01_risks.adoc#R13, R13 GDPR Compliance>>

|===

== Feature Priority Matrix

[cols="1,2,3,1", options="header"]
|===
|Priority |Feature |Rationale |Sprint

|P0 - Critical
|F4 AI Safety Layer
|Foundation for all AI features, must be in place first
|Sprint 1-2

|P0 - Critical
|F1 AI Text Chat (Kids)
|Core kids engagement feature
|Sprint 2-3

|P1 - High
|F2 Voice AI Chat (Mobile)
|Premium differentiating feature
|Sprint 3-5

|P1 - High
|F3 Parental Controls
|Required for COPPA compliance
|Sprint 4-5

|P1 - High
|F5 Kids Website Content
|Core content for kids engagement
|Sprint 2-4

|P2 - Medium
|F6 Adult E-commerce
|Revenue generation
|Sprint 3-5

|P2 - Medium
|F9 5 AI Characters
|Character personality differentiation
|Sprint 2-4

|P2 - Medium
|F8 Multi-language
|Market expansion requirement
|Sprint 5-6

|P3 - Lower
|F7 Adult AI Features
|Nice-to-have for adult engagement
|Sprint 5-6

|P3 - Lower
|F10 User Authentication
|Required for e-commerce
|Sprint 3
|===

== Traceability Summary

* **Total Features**: 10
* **Features with Safety Requirements**: 4 (F1, F2, F4, F9)
* **Features with COPPA Requirements**: 4 (F1, F3, F4, F5)
* **Features with Performance Requirements**: 5 (F1, F2, F5, F6, F7)
* **Features with Identified Risks**: 9 (all except F10)
* **Features with Technical Debt**: 5 (F2, F3, F4, F6, F8)
